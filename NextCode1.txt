apm0013173-one-creator\src\app\admin\admin-gui-nav
<!-- START Modal -->
<p-confirmDialog maskStyleClass="ui-widget-overlay ui-dialog-mask ui-dialog-visible ui-dialog-mask-scrollblocker"></p-confirmDialog>
<!-- END Modal -->

<div class="application_loading" *ngIf="showSpinner">
  <p-progressSpinner animationDuration=".8s"></p-progressSpinner>
</div>

<div class="ui-g">
  <div *ngIf="index == 0" class="ui-g-2">
    <div id="left_side_panel">
      <p-autoComplete styleClass="admin-ui-search" placeholder="Search:" [(ngModel)]="selectedCustomer" (onSelect)="change($event)" [suggestions]="filteredCustomers" field="name" (completeMethod)="search($event)"></p-autoComplete>
      <br>
      <div style="border-bottom: solid 1px #c8c8c8;margin-top: 12px;"></div>
      <br>
      <p-listbox [options]="customers" [(ngModel)]="selectedCustomer" [listStyle]="{'max-height':'600px'}">
        <ng-template let-customer>
          <div class="ui-helper-clearfix">
            <span style="float:left;margin:10px 10px 0 0">{{customer.name}}</span>
          </div>
        </ng-template>
      </p-listbox>
      <br>
      <button pButton type="button" style="width: 100% !important;" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="createCustomer()" label="New customer" ></button>
    </div>
  </div>
  <div *ngIf="index == 1" class="ui-g-2">
    <div id="left_side_panel">
      <p-autoComplete styleClass="admin-ui-search" placeholder="Search:" [(ngModel)]="selectedService" (onSelect)="selectService($event)" [suggestions]="filteredServices" field="serviceName" (completeMethod)="searchService($event)"></p-autoComplete>
      <br>
      <div style="border-bottom: solid 1px #c8c8c8;margin-top: 12px;"></div>
      <br>
      <p-listbox [options]="services" optionLabel="serviceName" (onChange)="selectService($event)"[(ngModel)]="selectedService" [listStyle]="{'max-height':'600px'}">
      </p-listbox>
      <br>
      <button pButton type="button" style="width: 100% !important;" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="createService()" label="New service" ></button>
    </div>
  </div>
  <div [ngClass]="{'fullScreenView' : (index == 2)}" class="ui-g-10">
    <div id="right_side_panel">
      <p-tabView (onChange)="handleChange($event)">
        <p-tabPanel header="Customer manager">
          <app-customer-admin (eventEmitter)="loadCustomers()"  [selectedCustomer]=(selectedCustomer)></app-customer-admin>
        </p-tabPanel>
        <p-tabPanel header="Services manager">
          <app-service-administration (eventEmitter)="loadServices()" [selectedService]=(selectedService)></app-service-administration>
        </p-tabPanel>
        <p-tabPanel header="Settings manager">
          <app-settings-gui></app-settings-gui>
        </p-tabPanel>
      </p-tabView>
    </div>

    <div *ngIf="index == 0 && customer" class="fullScreenView device-container mt-3">
      <app-device-mgmt [selectedCustomer]=(customer)></app-device-mgmt>
    </div>

  </div>
</div>


<!-- START Modal for create customer -->
<p-dialog *ngIf="customerForm"
          header="Create customer"
          [(visible)]="modalVisible"
          [modal]="true"
          [style]="{width: '50vw'}"
          [baseZIndex]="10000"
          [blockScroll]="true"
          [resizable]="false">
  <form [formGroup]="customerForm">
    <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0">
      <div class="ui-grid-col-3">
        Customer Name<span id="marker_required">*</span>:
      </div>
      <div class="ui-grid-col-6">
        <input pInputText type="text" formControlName="name" placeholder="Required" />
      </div>
      <div class="ui-grid-col-3">
        <p-message severity="warn" text="This field is required!" *ngIf="!customerForm.controls['name'].valid&&customerForm.controls['name'].dirty"></p-message>
      </div>
    </div>
  </form>

  <p-footer>
    <button type="button" pButton icon="pi pi-check" (click)="save()" label="Save"></button>
    <button type="button" pButton icon="pi pi-times" (click)="closeDialog()" label="Cancel" class="ui-button-secondary"></button>
  </p-footer>
</p-dialog>
<!-- END Modal for create customer -->

<!-- START Modal for create Service -->
<p-dialog *ngIf="serviceForm"
          header="Create Service"
          [(visible)]="modalServiceVisible"
          [modal]="true"
          [style]="{width: '50vw'}"
          [baseZIndex]="10000"
          [blockScroll]="true"
          [resizable]="false">
  <form [formGroup]="serviceForm">
    <div>
      <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
        <div class="ui-grid-col-3">
          Service Name<span id="marker_required">*</span>:
        </div>
        <div class="ui-grid-col-6">
          <input pInputText type="text" formControlName="serviceName" placeholder="Required" />
        </div>
        <div class="ui-grid-col-3">
          <p-message severity="warn" text="This field is required!" *ngIf="!serviceForm.controls['serviceName'].valid&&serviceForm.controls['serviceName'].dirty"></p-message>
        </div>
      </div>
    </div>
  </form>
  <p-footer>
    <button type="button" pButton icon="pi pi-check" (click)="saveService()" label="Save"></button>
    <button type="button" pButton icon="pi pi-times" (click)="closeDialogService()" label="Cancel" class="ui-button-secondary"></button>
  </p-footer>
</p-dialog>
<!-- END Modal for create Service -->

apm0013173-one-creator\src\app\admin\admin-gui-nav\admin-gui-nav.component.scss
body .ui-autocomplete .ui-autocomplete-input {
    width: 100% !important;
}

.fullScreenView {
    width: 100% !important;
}

.admin-ui-search{
    width: 100% !important;
}

.device-container {
  background: white !important;
  box-shadow: 5px 5px 20px lightgray;
  padding: 10px;
}

apm0013173-one-creator\src\app\admin\admin-gui-nav\admin-gui-nav.component.ts
import {Component, OnInit, Output, ViewEncapsulation, OnChanges, OnDestroy} from '@angular/core';
import { SelectItem, MessageService } from 'primeng/api';
import { FormGroup, FormBuilder, FormControl, Validators } from '@angular/forms';
import {Subscription} from 'rxjs';
import {ControllerService} from '../../services/controller.service';
import {ApiConnectService} from '../../template-manager/api-connect.service';

@Component({
  selector: 'app-admin-gui-nav',
  templateUrl: './admin-gui-nav.component.html',
  styleUrls: ['./admin-gui-nav.component.scss'],
  encapsulation: ViewEncapsulation.None
})

export class AdminGuiNavComponent implements OnInit, OnChanges, OnDestroy {
  @Output() index = 0;
  customers: SelectItem[] = [];
  selectedCustomer: any = {};
  selectedService: any = {};
  showSpinner = true;
  filteredCustomers: SelectItem[] = [];
  customerForm: FormGroup;
  serviceForm: FormGroup;
  modalVisible = false;
  services: any = [];
  modalServiceVisible: boolean;
  filteredServices: any[];

  subscriptions: Subscription[] = [];
  constructor(private controllerService: ControllerService, private fb: FormBuilder, private apiService: ApiConnectService, private messageService: MessageService){
    this.customerForm = this.fb.group({
      name: new FormControl('', Validators.required)
    });

    this.serviceForm = this.fb.group({
      serviceName: new FormControl('', Validators.required)
    });
  }

  ngOnInit() {
    this.loadCustomers();
    this.loadServices();
  }

  ngOnChanges(){
    this.loadCustomers();
    this.loadServices();
  }

  get customer() {
    return (this.selectedCustomer &&
      Object.keys(this.selectedCustomer).length === 0 &&
      Object.getPrototypeOf(this.selectedCustomer) === Object.prototype) ? null : this.selectedCustomer;
  }

  /**
   * Load customers for left side menu
   */
  public loadCustomers():void{
    this.controllerService.getCustomersFromDB().subscribe(customers => {
      this.customers = [];
      // tslint:disable-next-line:prefer-for-of
      for (let i = 0; i < customers.length; i++) {
        this.customers.push({label: customers[i].name, value: {
            id: customers[i].id,
            name: customers[i].name
          }
        });
      }
      this.showSpinner = false;
    }, err=>{
      this.messageService.add({severity:'error', summary:'Service Message', detail:'Error when customer loading!'});
      this.showSpinner = false;
    });
  }


  public loadServices(): void {
    this.controllerService.getServices().subscribe((services)=>{
      this.services = services['result']
    });
  }


  /**
   * Handling visualization of customers left side menu
   * @params event
   */
  public handleChange(event): void {
    this.index = event.index;
  }

  /**
   * search in customer
   * @params event
   */
  public search(event): void{
    const query = event.query;
    this.filteredCustomers = this.filterCustomer(query, this.customers);
    // this.customers = this.formatCustomer(this.filteredCustomers);
  }

  /**
   * search in customer
   * @params query
   * @params customers
   */
  public filterCustomer(query, customers): any[] {
    const filtered: any[] = [];
    // tslint:disable-next-line:prefer-for-of
    for (let i = 0; i < customers.length; i++) {
      const customer = customers[i];
      if (customer.hasOwnProperty('label') && customer.hasOwnProperty('value')) {
        if (customer['label'].toLowerCase().indexOf(query.toLowerCase()) === 0) {
          filtered.push({ name: customer['label'], id: customer['value'] });
        }
      }
    }
    return filtered;
  }

  /**
   * convert selected customer form autocomplete to right format for all components which is using this varible
   * @params event
   */
  public change(event): void{
    this.selectedCustomer = { name: event['name'], id: event['id']['id'] };
  }

  public selectService(event): void {
    this.selectedService = { serviceName: event['value']['serviceName'], id: event['value']['id'] };
  }

  public searchService(event): void{
    const query = event.query;
    this.filteredServices = this.filterService(query, this.services);
  }

  /**
   * search in customer
   * @params query
   * @params services
   */
  public filterService(query, services): any[] {
    const filtered: any[] = [];
    // tslint:disable-next-line:prefer-for-of
    for (let i = 0; i < services.length; i++) {
      const service = services[i];
      if (service.hasOwnProperty('label') && service.hasOwnProperty('value')) {
        if (service['label'].toLowerCase().indexOf(query.toLowerCase()) === 0) {
          filtered.push({ name: service['label'], id: service['value'] });
        }
      }
    }
    return filtered;
  }

  /**
   * open modal for create customer
   */
  public createCustomer(): void{
    this.modalVisible = true;
  }

  public createService(): void{
    this.modalServiceVisible = true;
  }

  /**
   * save and create customer
   */
  public save(): void{
    if(!this.customerForm.valid) { return; }
    const customer = {
      name : this.customerForm.get('name').value,
      bcCompanyId: '',
      bcName: '',
      active: true
    }
    this.subscriptions[0] = this.controllerService
      .createCustomers(customer)
      .subscribe(() => {
        this.customerForm.reset();
        this.messageService.add({severity:'success', summary:'Service Message', detail:'Customer successfully created!'});
        this.loadCustomers();
      }, error =>{
        this.messageService.add({severity:'error', summary:'Service Message', detail:'Error while creating the customer!'});
      });
    this.modalVisible = false;
  }

  saveService(){
    this.subscriptions[1] = this.controllerService
      .saveService(this.serviceForm.value)
      .subscribe((service)=>{
        this.serviceForm.reset();
        this.loadServices();
        this.closeDialogService();
        this.messageService.add({severity:'success', summary:'Service Message', detail:'Service successfully created!'});
      }, err => {
        console.error(err);
        this.messageService.add({severity: 'error', summary:'Service Message', detail:'Error while creating the service!'});
      });
    this.modalServiceVisible = false;
  }

  /**
   * close dialog and clear customer form
   */
  public closeDialog(): void{
    this.modalVisible = false;
    this.customerForm.reset();
  }

  public closeDialogService(): void{
    this.modalServiceVisible = false;
    this.serviceForm.reset();
  }

  ngOnDestroy() {
    this.subscriptions.forEach(subscription => {
      if(subscription) {
        subscription.unsubscribe();
      }
    })
  }
}

apm0013173-one-creator\src\app\admin\customer-admin\customer-admin.component.html
<div class="application_loading" *ngIf="showSpinner">
  <p-progressSpinner animationDuration=".8s"></p-progressSpinner>
</div>

<!-- START Admin customer form -->
<form *ngIf="form" [formGroup]="form">
  <div [ngClass]="{disabled: isDisabled}" >
    <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
      <div class="ui-grid-row">
        <div class="ui-grid-col-2">
          Customer Name <span id="marker_required">*</span>:
        </div>
        <div class="ui-grid-col-6">
          <input pInputText type="text" formControlName="name" placeholder="Required" required="true"/>
        </div>
        <div class="ui-grid-col-4">
          <p-message severity="warn" text="This field is required!" *ngIf="!form.controls['name'].valid&&form.controls['name'].dirty"></p-message>
        </div>
      </div>

      <div class="ui-grid-row">
        <div class="ui-grid-col-2">
          Busines Center ID:
        </div>
        <div class="ui-grid-col-6">
          <input pInputText type="text" formControlName="bcCompanyId" placeholder="" />
        </div>
        <div class="ui-grid-col-4">
        </div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2">
          MSIM Email:
        </div>
        <div class="ui-grid-col-6">
          <input pInputText type="text" formControlName="msimEmail" placeholder="" />
        </div>
        <div class="ui-grid-col-4">
        </div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2">
          CRWeb ID:
        </div>
        <div class="ui-grid-col-6">
          <input pInputText type="text" formControlName="crWebId" placeholder="" />
        </div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2">
          GRUA name:
        </div>
        <div class="ui-grid-col-6">
          <div class="ui-grid-row">
            <button id="btn_add" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="addGrua()"></button>
            <input pInputText type="text" formControlName="grua" placeholder=""/>
          </div>
          <div *ngIf="arrayOfGruaData" class="sections">
            <div *ngFor="let gruaData of arrayOfGruaData; let i = index" class="section">
              <button id="btn_remove" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-minus" class="ui-button-info" (click)="removeGrua(gruaData)"></button>
              {{gruaData.grua}}
            </div>
          </div>
        </div>
        <div class="ui-grid-col-4">
          <p-message *ngIf="!form.controls['grua'].valid && form.controls['grua'].dirty" severity="warn" text="Error: This is a required field!"></p-message>
        </div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2">
          Services:
        </div>
        <div class="ui-grid-col-6">
          <div *ngIf="services" class="ui-grid-row">
            <button id="btn_add" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="addService()"></button>
            <p-dropdown  placeholder="Select service" formControlName="service" [options]="services" optionLabel="serviceName" required="true"></p-dropdown>
          </div>
          <div *ngIf="customerServices" class="sections">
            <div *ngFor="let service of customerServices; let i = index" class="section">
              <button id="btn_remove" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-minus" class="ui-button-info" (click)="removeService(service)"></button>
              <button id="btn_setting" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-cog" class="ui-button-info" (click)="editService(service)"></button>
              {{service.serviceName}}
            </div>
          </div>
        </div>
        <div class="ui-grid-col-4">
          <p-message *ngIf="!form.controls['service'].valid && form.controls['service'].dirty" severity="warn" text="Error: This is a required field!"></p-message>
        </div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2">
          Status active:
        </div>
        <div class="ui-grid-col-6">
          <p-inputSwitch formControlName="active"></p-inputSwitch>
          <p-message *ngIf="!form.controls['active'].valid && form.controls['active'].dirty" severity="warn" text="Error: This is a required field!"></p-message>
        </div>
        <div class="ui-grid-col-4">
        </div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-12">
          <button pButton type="button" style="width: 100px;" iconPos="left" icon="fa fa-save" class="ui-button-info" (click)="updateCustomerData()" [disabled]="updateBtnDisable" label="Update" ></button>
        </div>
      </div>
    </div>
  </div >
</form>
<!-- END Admin customer form -->

<!-- START Modal for service -->
<p-dialog *ngIf="assignedAttributes && serviceForm && generated"
          header="{{title}} {{service['serviceName']}} service"
          styleClass="service_modal"
          [closeOnEscape]="false"
          [(visible)]="modalVisible"
          [modal]="true"
          [style]="{width: '50vw'}"
          autoZIndex="true"
          [blockScroll]="true"
          [resizable]="false"
          [closable]="false"
>

  <form [formGroup]="serviceForm">
    <div>
      <div *ngFor="let attribute of assignedAttributes" class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
        <div *ngIf="attribute['id'] == 1" class="ui-grid-row">
          <div class="ui-grid-col-3">
            MCAP Credential<span id="marker_required">*</span>:
          </div>
          <div class="ui-grid-col-6">
            <p-dropdown  placeholder="Select credential" formControlName="credential" [options]="credentilas" optionLabel="credential" required="true"></p-dropdown>
          </div>
          <div class="ui-grid-col-3">
            <p-message severity="warn" text="This field is required!" *ngIf="!serviceForm.controls['credential'].valid&&serviceForm.controls['credential'].dirty"></p-message>
          </div>
        </div>

        <div *ngIf="attribute['id'] == 4" class="ui-grid-row">
          <div class="ui-grid-col-3">
            Auto CR Creation<span id="marker_required">*</span>:
          </div>
          <div class="ui-grid-col-6 d-flex-center">
            <p-inputSwitch formControlName="shouldCreateCr" (onChange)="updateCrConfig()"></p-inputSwitch>
            <p class="ml-3 d-flex-center">
              <i class="pi pi-info-circle mr-1"></i> While enabled, automatically creates change requests.
            </p>
          </div>
          <div class="ui-grid-col-3">
            <p-message severity="warn" text="This field is required!" *ngIf="!serviceForm.controls['credential'].valid&&serviceForm.controls['credential'].dirty"></p-message>
          </div>
        </div>

        <div *ngIf="attribute['id'] == 3" class="ui-grid-row">
          <div class="ui-grid-col-3">
            GRUA:
          </div>
          <div class="ui-grid-col-6">
            <div class="ui-grid-row">
              <div class="ui-grid-col-2">
                <button id="btn_add" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="addActionName()"></button>
              </div>
              <div class="ui-grid-col-10">
                <input pInputText type="text" formControlName="actionName" placeholder="Required" required="true" />
              </div>
            </div>
            <div *ngIf="actionNames" class="sections">
              <div *ngFor="let action of actionNames; let i = index" class="section">
                <button id="btn_remove" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-minus" class="ui-button-info" (click)="removeActionName(action)"></button>
                {{action.actionCustomerName}}
              </div>
            </div>
          </div>
          <div class="ui-grid-col-3">
            <p-message severity="warn" text="This field is required!" *ngIf="!serviceForm.controls['actionName'].valid&&serviceForm.controls['actionName'].dirty"></p-message>
          </div>
        </div>
        <div *ngIf="attribute['id'] == 2" class="ui-grid-row">
          <div class="ui-grid-col-3">
            ORCHESTRATOR list:
          </div>
          <div class="ui-grid-col-6">
            <div class="ui-grid-row">
              <div class="ui-grid-col-2">
                <button id="btn_add" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="addOrchestratorListRow()"></button>
              </div>
              <div class="ui-grid-col-7">
                <input pInputText type="url" formControlName="url" placeholder="Url" required="true" />
              </div>
              <div class="ui-grid-col-3">
                <input pInputText type="text" formControlName="tenantId" placeholder="Tenand id" required="true" />
              </div>
            </div>
            <div *ngIf="orchestratorList" class="sections">
              <div *ngFor="let orchestratorRow of orchestratorList; let i = index" class="section">
                <div class="ui-grid-row">
                  <div class="ui-grid-col-2">
                    <button id="btn_remove" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-minus" class="ui-button-info" (click)="removeOrchestratorListRow(orchestratorRow)"></button>
                  </div>
                  <div class="ui-grid-col-2">
                    <button id="btn_setting" pTooltip="Click to edit tags for orchestrator." tooltipPosition="right" tooltipZIndex="9999999" pButton type="button" iconPos="left" icon="pi pi-pencil" class="ui-button-info" (click)="addOrchestratorTag(orchestratorRow)"></button>
                  </div>
                  <div style="text-align: center" class="ui-grid-col-8" (click)="addOrchestratorTag(orchestratorRow)">
                    <a id="url">{{orchestratorRow.url}}</a>
                  </div>
                  <div style="text-align: center" class="ui-grid-col-3">
                    {{orchestratorRow.tenantId}}
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="ui-grid-col-3">
            <p-message severity="warn" text="This field is required!" *ngIf="(!serviceForm.controls['url'].valid&&serviceForm.controls['url'].dirty)||(!serviceForm.controls['tenantId'].valid&&serviceForm.controls['tenantId'].dirty)"></p-message>
          </div>
        </div>

        <div *ngIf="attribute['id'] == 5" class="ui-grid-row">
          <div class="ui-grid-col-3">
            ORCHESTRATOR yaml:
          </div>
          <div class="ui-grid-col-6">
            <div *ngIf="orchestratorList">
              <p-dropdown class="full-width" placeholder="Select Orchestrator" [options]="orchestratorList" optionLabel="url" formControlName="orchestrator" (onChange)="onOrchestratorChanged($event.value)"></p-dropdown>
              <textarea class="full-width"  [rows]="5" pInputTextarea placeholder="Enter the YAML config for the selected Orchestrator" formControlName="configYaml"></textarea>
              <button [disabled]="!(serviceForm.get('configYaml').dirty || serviceForm.get('configYaml').touched)"
                      pButton label="Save Config" icon="fa fa-save" class="mt-2 ui-button ui-button-secondary" style="width: 8rem"
                      (click)="onSaveConfig()"></button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </form>
  <app-permission-manager (eventEmitter)="spinnerChange($event)" [customer]=(selectedCustomer) [service]=(service)></app-permission-manager>
  <p-footer>
    <button *ngIf="showButton" type="button" pButton icon="pi pi-check" (click)="save()" label="Save"></button>
    <button type="button" pButton icon="pi pi-times" (click)="closeDialog()" label="Close" class="ui-button-secondary"></button>
  </p-footer>
</p-dialog>
<!-- END Modal for service -->

<p-dialog (onHide)="closeTagDialog()" [closeOnEscape]="false" [modal]="true" [resizable]="false" [draggable]="false" [(visible)]="tagModal" styleClass="tag_modal" autoZIndex="true" >
  <form [formGroup]="tagForm">
    <div class="ui-grid-row">
      <div class="ui-grid-col-3">
        ORCHESTRATOR Tag:
      </div>
      <div style="margin-left: 40px;" class="ui-grid-col-8">
        <div class="ui-grid-col-4">
          <input style="margin-right: 50px" pInputText type="text" formControlName="tag" placeholder="Tag" required="true" />
        </div>
        <div style="margin-left: 60px"class="ui-grid-col-4">
          <button id="btn_add" pButton type="button" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="addOrchestratorTagsRow()"></button>
        </div>
      </div>
    </div>
    <div *ngIf="orchestratorTags" class="sections">
      <div *ngFor="let orchestratorTagsRow of orchestratorTags; let i = index" class="section">
        <div class="ui-grid-row">
          <div class="ui-grid-col-2">
            <button id="btn_remove" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-minus" class="ui-button-info" (click)="removeOrchestratorTags(orchestratorTagsRow)"></button>
          </div>
          <div style="text-align: center" class="ui-grid-col-7">
            {{orchestratorTagsRow}}
          </div>
        </div>
      </div>
    </div>
  </form>
</p-dialog>


<p-dialog [modal]="true" [resizable]="false" [draggable]="false" [(visible)]="validationModal"
          styleClass="validation_modal" autoZIndex="true">
  <div>
    <label>
      Some required fields are not filled, it can cause issues for executing actions, do you want to continue?
      <br>
      Missing fields:
    </label>
    <span>
      <ul>
        <li *ngFor="let field of missingFields"> {{ field }} </li>
      </ul>
    </span>
  </div>
  <p-footer>
    <button type="button" pButton icon="pi pi-check" (click)="continue()" label="Continue"></button>
    <button type="button" pButton icon="pi pi-times" (click)="closeValidationModal()" label="Close" class="ui-button-secondary"></button>
  </p-footer>
</p-dialog>

apm0013173-one-creator\src\app\admin\customer-admin\customer-admin.component.scss
#btn_remove {
    background: transparent !important;
    color: rgb(207,42,42) !important;
    border: none !important;
}

#btn_add {
    background: transparent !important;
    color: #188650 !important;
    border: none !important;
}

#btn_setting{
    background: transparent !important;;
    color: black !important;
    border: none !important;
}

.service_modal {
    min-width: 700px !important;
    height: 500px !important;
}

body .ui-dialog .ui-dialog-content {
    height: 100% !important;
}

.disabled {
    pointer-events: none;
    opacity: 0.5;
}

body .ui-inputswitch.ui-inputswitch-checked .ui-inputswitch-slider {
    background-color: #0568ae !important;
}

body .ui-button {
    background-color: #0568ae;
    border: 1px solid #0568ae;
}

#url:hover {
    font-weight: bold;
}

.tag_modal {
    min-width: 600px !important;
    height: 300px !important;
}

.validaion_modal {
    min-width: 300px !important;
    height: 150px !important;
}

.validation_label {
    display: inline-block;
    vertical-align: top;
    width: 100px;
    border: solid red 1px;
}

.validation_list {
    display: inline-block;
    vertical-align: top;
    list-style-type: none;
    border: solid green 1px;
    margin: 0;
}

.d-flex-center {
  display: inline-flex;
  align-items: center;
}
.ui-confirmdialog-message {
    z-index: 1000000 !important;
    }

apm0013173-one-creator\src\app\admin\customer-admin\customer-admin.component.ts
import { Component, OnInit, Input, OnChanges,ViewEncapsulation, Output, EventEmitter } from '@angular/core';
import { MessageService, ConfirmationService } from 'primeng/api';
import { FormBuilder, FormControl, Validators, FormGroup } from '@angular/forms';
import { forkJoin } from 'rxjs';
import {ControllerService} from '../../services/controller.service';
import {finalize} from "rxjs/operators";

@Component({
  selector: 'app-customer-admin',
  templateUrl: './customer-admin.component.html',
  styleUrls: ['./customer-admin.component.scss'],
  encapsulation: ViewEncapsulation.None,
})
export class CustomerAdminComponent implements OnInit, OnChanges {
  @Input() selectedCustomer: any = {};
  @Output() eventEmitter = new EventEmitter<any>();
  form: FormGroup;
  serviceForm: FormGroup;
  tagForm: FormGroup;
  customerServices: any[];
  orchestratorList: any[] = undefined;
  actionNames: any[];
  modalVisible = false;
  service: any = {};
  title = '';
  services: any[];
  isDisabled = true;
  mcapCredentials: any = undefined;
  autoCreateCrConfig: any = {};
  showSpinner = false;
  arrayOfGruaData: any[] = undefined;
  updateBtnDisable = false;
  assignedAttributes: any = null;
  generated = false;
  attributes: any[] = null;
  showButton = false;
  credentilas: any[] = null;
  tagModal = false;
  chosenOrchestrator: any = null;
  orchestratorTags: any[] = [];
  validationModal = false;
  missingFields: string[] = [];

  constructor(
    private fb: FormBuilder,
    private messageService: MessageService,
    private controllerService: ControllerService,
    private confirmationService: ConfirmationService
  ) {
    this.serviceForm = this.fb.group({});
    this.tagForm = this.fb.group({
      tag: new FormControl('', Validators.required),
    });
  }

  ngOnInit() {
    this.generateFormGroup();
    if (this.selectedCustomer['id']) {
      this.mcapCredentials = undefined;
      this.loadAllAvailableServices();
      this.showSpinner = true;
      this.loadGrua(this.selectedCustomer['id']);
      this.loadCustomer(this.selectedCustomer['id']);
      this.loadServices(this.selectedCustomer['id']);
    }
  }

  ngOnChanges() {
    this.generateFormGroup();
    if (this.selectedCustomer['id']) {
      this.showButton = false;
      this.generated = false;
      this.mcapCredentials = undefined;
      this.loadAllAvailableServices();
      this.showSpinner = true;
      this.loadGrua(this.selectedCustomer['id']);
      this.loadCustomer(this.selectedCustomer['id']);
      this.loadServices(this.selectedCustomer['id']);
      this.loadMcapCredential();
    }
  }

  /**
   * Load customer properties and atributes to customer manager
   * @params customerId
   */
  private loadCustomer(customerId: string): void {
    this.controllerService.getCustomerById(customerId).subscribe(
      (customer) => {
        this.isDisabled = false;
        this.showSpinner = false;
        this.form.get('name').setValue(customer['result']['name']);
        this.form
          .get('bcCompanyId')
          .setValue(customer['result']['bcCompanyId']);
        this.form.get('active').setValue(customer['result']['active']);
        this.form.get('crWebId').setValue(customer['result']['crWebId']);
        this.form.get('msimEmail').setValue(customer['result']['msimEmail']);
      },
      (error) => {
        this.showSpinner = false;
        this.messageService.add({
          severity: 'error',
          summary: 'Service Message',
          detail: 'Error when customer loading!',
        });
      }
    );
  }

  /**
   * Update customer data
   */
  public updateCustomerData(): void {
    if (this.form.get('name').valid && this.form.get('active').valid) {
      this.updateBtnDisable = true;
      const customer = {
        id: this.selectedCustomer['id'],
        name: this.form.get('name').value,
        bcName: '',
        bcCompanyId: this.form.get('bcCompanyId').value,
        active: this.form.get('active').value,
        crWebId: this.form.get('crWebId').value,
        msimEmail: this.form.get('msimEmail').value,
      };
      this.controllerService.updateCustomerById(customer).subscribe(
        (result) => {
          this.eventEmitter.emit();
          this.updateBtnDisable = false;
          if (result['message'] == 'Record is already up to date!') {
            this.messageService.add({
              severity: 'success',
              summary: 'Service Message',
              detail: 'Customer is already up to date!',
            });
          } else {
            this.messageService.add({
              severity: 'success',
              summary: 'Service Message',
              detail: 'Customer successfully updated!',
            });
          }
        },
        (error) => {
          this.updateBtnDisable = false;
          this.messageService.add({
            severity: 'error',
            summary: 'Service Message',
            detail: 'Error when customer updating!',
          });
        }
      );
    } else {
      this.form.controls['name'].markAsDirty();
      this.form.controls['active'].markAsDirty();
    }
  }

  /**
   * Add service to customer
   */
  public async addService() {
    if (this.form.get('service').valid) {
      this.showSpinner = true;
      this.mcapCredentials = undefined;
      this.orchestratorList = undefined;
      this.service = this.form.get('service').value;
      const requestArray = [];
      requestArray.push(
        this.createService(this.selectedCustomer['id'], this.service['id'])
      );
      requestArray.push(this.loadAssignedAttributes(this.service['id']));
      forkJoin(requestArray).subscribe((results) => {
        this.setServiceFormAndLoadData(this.assignedAttributes);
        this.title = 'Create';
        this.showDialog();
      });
    } else {
      this.form.controls['service'].markAsDirty();
      this.form.controls['service'].markAsTouched();
    }
  }

  /**
   * Assigne service for selected customer
   * @params customerId
   * @params serviceId
   */
  private createService(customerId, serviceId): Promise<any> {
    return new Promise((resolve, reject) => {
      this.controllerService
        .saveServiceToCustomer(customerId, serviceId)
        .subscribe(
          (result) => {
            this.showSpinner = false;
            this.form.get('service').setValue('');
            this.form.controls['service'].markAsPristine();
            this.form.controls['service'].markAsUntouched();
            this.loadServices(this.selectedCustomer['id']);
            this.messageService.add({
              severity: 'success',
              summary: 'Service Message',
              detail: 'Service successfully assigned to customer!',
            });
            resolve(resolve);
          },
          (error) => {
            this.showSpinner = false;
            this.messageService.add({
              severity: 'error',
              summary: 'Service Message',
              detail: 'Error when service assigning to customer!',
            });
            reject(error);
          }
        );
    });
  }

  /**
   * Delete service from customer
   * @params service
   */
  public removeService(service): void {
    this.confirmationService.confirm({
      icon: 'pi pi-exclamation-triangle',
      header: 'Confirmation',
      message:
        'Are you sure that you want to delete "' +
        service['serviceName'] +
        '" service?',
      accept: () => {
        this.showSpinner = true;
        this.controllerService
          .deleteServiceToCustomer(this.selectedCustomer['id'], service['id'])
          .subscribe(
            (result) => {
              this.showSpinner = false;
              const index = this.customerServices.indexOf(service, 0);
              this.customerServices.splice(index, 1);
              this.messageService.add({
                severity: 'success',
                summary: 'Service Message',
                detail: 'Service successfully deleted!',
              });
            },
            (error) => {
              this.showSpinner = false;
              this.messageService.add({
                severity: 'error',
                summary: 'Service Message',
                detail: 'Error when service is deleting!',
              });
            }
          );
      },
    });
  }

  /**
   * Add aciton name to customer service
   */
  public addActionName(): void {
    if (this.serviceForm.get('actionName').valid) {
      this.showSpinner = true;
      this.controllerService
        .saveActionData(
          this.selectedCustomer['id'],
          this.service['id'],
          '',
          this.serviceForm.get('actionName').value
        )
        .subscribe(
          (result) => {
            this.showSpinner = false;
            this.serviceForm.get('actionName').setValue('');
            this.serviceForm.get('actionName').clearValidators();
            this.serviceForm.get('actionName').setErrors(null);
            this.serviceForm.updateValueAndValidity();
            this.loadActionData(
              this.selectedCustomer['id'],
              this.service['id']
            );
            this.messageService.add({
              severity: 'success',
              summary: 'Service Message',
              detail: 'Action data successfully assigned to service!',
            });
          },
          (error) => {
            this.showSpinner = false;
            this.messageService.add({
              severity: 'error',
              summary: 'Service Message',
              detail: 'Error when action data assigning to service!',
            });
          }
        );
    } else {
      this.serviceForm.controls['actionName'].markAsDirty();
      this.serviceForm.controls['actionName'].markAsTouched();
    }
  }

  /**
   * Delete aciton name which is associated with customer service
   * @params action
   */
  public removeActionName(action): void {
    this.confirmationService.confirm({
      icon: 'pi pi-exclamation-triangle',
      header: 'Confirmation',
      message:
        'Are you sure that you want to delete "' +
        action['actionCustomerName'] +
        '"?',
      accept: () => {
        this.showSpinner = true;
        this.controllerService.removeActionData(action['id']).subscribe(
          (result) => {
            this.showSpinner = false;
            this.messageService.add({
              severity: 'success',
              summary: 'Service Message',
              detail: 'Action data successfully deleted!',
            });
            const index = this.actionNames.indexOf(action, 0);
            this.actionNames.splice(index, 1);
          },
          (error) => {
            this.showSpinner = false;
            this.messageService.add({
              severity: 'error',
              summary: 'Service Message',
              detail: 'Error when action data deleting!',
            });
          }
        );
      },
    });
  }

  /**
   * Edit service from customer
   * @params service
   */
  public async editService(service) {
    this.mcapCredentials = undefined;
    this.orchestratorList = undefined;
    this.service = service;
    this.title = 'Edit';
    this.showSpinner = true;
    await this.loadAssignedAttributes(this.service['id']);
    this.setServiceFormAndLoadData(this.assignedAttributes);
    this.showDialog();
  }

  /**
   * Save service to customer
   */
  public async save() {
    if (this.serviceForm.controls['credential'].valid) {
      this.modalVisible = false;
      this.showSpinner = true;
      await this.addMcapCredentials(
        this.selectedCustomer['id'],
        this.service['id'],
        this.serviceForm.get('credential').value['id']
      );
      this.serviceForm = this.fb.group({});
      this.showButton = false;
      this.showSpinner = false;
    } else {
      this.serviceForm.controls['credential'].markAsDirty();
      this.serviceForm.controls['credential'].markAsTouched();
    }
  }

  /**
   * Show dialog
   */
  public showDialog(): void {
    this.modalVisible = true;
  }

  /**
   * Close dialog
   */
  public closeDialog(): void {
    this.missingFields = [];
    if (this.actionNames.length == 0) {
      this.missingFields.push('Action grua');
    }
    if (this.missingFields.length > 0) {
      this.validationModal = true;
    } else {
      this.modalVisible = false;
    }
    // Clear the Orch YAML
    if(this.serviceForm.get('orchestrator')) {
      this.serviceForm.get('orchestrator').setValue(null);
      this.serviceForm.updateValueAndValidity();
    }
    if(this.serviceForm.get('configYaml')) {
      this.serviceForm.get('configYaml').setValue(null);
      this.serviceForm.updateValueAndValidity();
    }
  }

  /**
   * Set up service form
   */
  public setServiceFormAndLoadData(serviceAttributes: any[]): void {
    this.showSpinner = true;
    // need add new case with id for new service attribute there
    for (const attribute of serviceAttributes) {
      if (attribute['id'] === 1) {
        this.showButton = true;
        this.serviceForm.addControl(
          'credential',
          new FormControl('', Validators.required)
        );
        this.getMcapCredentials(
          this.selectedCustomer['id'],
          this.service['id']
        );
      } else if (attribute['id'] === 2) {
        this.serviceForm.addControl(
          'url',
          new FormControl('', Validators.required)
        );
        this.serviceForm.addControl(
          'tenantId',
          new FormControl('', Validators.required)
        );
        this.loadOrchestratorListRow(
          this.selectedCustomer['id'],
          this.service['id']
        );
      } else if (attribute['id'] === 3) {
        this.serviceForm.addControl(
          'actionName',
          new FormControl('', Validators.required)
        );
        this.loadActionData(this.selectedCustomer['id'], this.service['id']);
      } else if (attribute['id'] === 4) {
        this.serviceForm.addControl(
          'shouldCreateCr',
          new FormControl('', Validators.required)
        );
        // Load the AutoCreate CR details
        this.loadAutoCrConfig(this.selectedCustomer['id'], this.service['id']);
      } else if (attribute['id'] === 5) {
        this.serviceForm.addControl('orchestrator', new FormControl(null));
        this.serviceForm.addControl('configYaml', new FormControl(null));
        this.loadOrchestratorListRow(
          this.selectedCustomer['id'],
          this.service['id']
        );
      }
    }
    this.showSpinner = false;
    this.generated = true;
  }

  /**
   * Load services by customer id
   */
  public loadServices(customerId: string): void {
    this.controllerService.getServicesByCustomerId(customerId).subscribe(
      (services) => {
        this.customerServices = services['services'];
      },
      (error) => {
        this.messageService.add({
          severity: 'error',
          summary: 'Service Message',
          detail: 'Error when loading services assigned to customer!',
        });
      }
    );
  }

  /**
   * Load all available services
   */
  public loadAllAvailableServices() {
    this.controllerService.getAvailableServices().subscribe(
      (services) => {
        this.services = services['result'];
      },
      (error) => {
        this.messageService.add({
          severity: 'error',
          summary: 'Service Message',
          detail: 'Error when loading services!',
        });
      }
    );
  }

  /**
   * Load action data for services by customer id
   */
  public loadActionData(customerId: string, serviceId: string): void {
    this.actionNames = [];
    this.controllerService
      .getActionDataByCustomerId(customerId, serviceId)
      .subscribe(
        (actionData) => {
          if (actionData['result'].length > 0) {
            this.serviceForm.get('actionName').setValue('');
            this.serviceForm.get('actionName').clearValidators();
            this.serviceForm.get('actionName').setErrors(null);
            this.serviceForm.updateValueAndValidity();
            this.actionNames = actionData['result'];
          }
        },
        (error) => {
          this.messageService.add({
            severity: 'error',
            summary: 'Service Message',
            detail: 'Error when loading action data!',
          });
        }
      );
  }

  /**
   * To Load Auto CR Create Configs
   * @params customerId
   * @params serviceId
   */
  loadAutoCrConfig(customerId: string, serviceId: string): void {
    this.controllerService
      .getAutoCrCreateConfig(customerId, serviceId)
      .subscribe(
        (data: any) => {
          let shouldCreateCr = false;
          if ('SHOULD_AUTO_CREATE_CR' in data) {
            this.autoCreateCrConfig = data;
            shouldCreateCr = data.SHOULD_AUTO_CREATE_CR;
          }
          this.serviceForm.patchValue({ shouldCreateCr });
        },
        (error) => {
          this.messageService.add({
            severity: 'error',
            summary: 'Service Message',
            detail: error.error?.message || 'Internal Server Error!',
          });
        }
      );
  }

  /**
   * Add mcap credentials  for customer
   */
  public addMcapCredentials(
    customerId: string,
    serviceId: string,
    credentialId: string
  ): Promise<any> {
    return new Promise((resolve, reject) => {
      const body = {
        customerId,
        serviceId,
        credentialId,
      };
      this.controllerService.saveMcapCredentials(body).subscribe(
        (mcapCredentials) => {
          this.messageService.add({
            severity: 'success',
            summary: 'Service Message',
            detail: 'Mcap credentials successfully updated!',
          });
          resolve(resolve);
        },
        (error) => {
          this.messageService.add({
            severity: 'error',
            summary: 'Service Message',
            detail: 'Error when updating mcap credentilas!',
          });
          reject(error);
        }
      );
    });
  }

  /**
   * Load mcap credentials for customer
   */
  public getMcapCredentials(customerId: string, serviceId: string): void {
    this.mcapCredentials = undefined;
    this.controllerService.getMcapCredentials(customerId, serviceId).subscribe(
      (mcapCredential) => {
        if (mcapCredential['result']['id']) {
          this.mcapCredentials = mcapCredential['result'];
          this.serviceForm.get('credential').setValue(mcapCredential['result']);
        }
      },
      (error) => {
        this.messageService.add({
          severity: 'error',
          summary: 'Service Message',
          detail: 'Error when loading mcap credentilas!',
        });
      }
    );
  }

  /**
   * Add gps name for customer
   */

  /**
   * Add gps name for customer
   */
  public addGrua(): void {
    if (this.form.get('grua').value != '') {
      this.form.controls['grua'].setValidators(null);
      this.showSpinner = true;
      const body = {
        customerId: this.selectedCustomer['id'],
        grua: this.form.get('grua').value,
      };
      this.controllerService.saveGruaData(body).subscribe(
        (result) => {
          this.form.get('grua').setValue('');
          this.form.controls['grua'].markAsPristine();
          this.form.controls['grua'].markAsUntouched();
          this.loadGrua(this.selectedCustomer['id']);
          this.messageService.add({
            severity: 'success',
            summary: 'Service Message',
            detail: 'Grua successfully saved!',
          });
          this.showSpinner = false;
        },
        (error) => {
          this.showSpinner = false;
          this.messageService.add({
            severity: 'error',
            summary: 'Service Message',
            detail: 'Error when saving grua!',
          });
        }
      );
    } else {
      this.form.controls['grua'].setValidators(Validators.required);
      this.form.controls['grua'].markAsDirty();
      this.form.controls['grua'].markAsTouched();
      this.form.controls['grua'].updateValueAndValidity();
    }
  }

  /**
   * Load Grua name for customer
   */
  public loadGrua(customerId: string): void {
    this.arrayOfGruaData = undefined;
    this.controllerService.loadGruaData(customerId).subscribe(
      (result) => {
        if (result['result'].length > 0) {
          this.arrayOfGruaData = result['result'];
        }
      },
      (error) => {
        this.messageService.add({
          severity: 'error',
          summary: 'Service Message',
          detail: 'Error when loading grua data!',
        });
      }
    );
  }

  /**
   * Remove gps name for customer
   */

  /**
   * Remove Grua name for customer
   */
  public removeGrua(grua: any): void {
    this.confirmationService.confirm({
      icon: 'pi pi-exclamation-triangle',
      header: 'Confirmation',
      message: 'Are you sure that you want to delete "' + grua['grua'] + '" ?',
      accept: () => {
        this.showSpinner = true;
        this.controllerService.deleteGruaData(grua['id']).subscribe(
          (result) => {
            this.loadGrua(this.selectedCustomer['id']);
            this.messageService.add({
              severity: 'success',
              summary: 'Service Message',
              detail: 'Grua data successfully deleted!',
            });
            this.showSpinner = false;
          },
          (error) => {
            this.showSpinner = false;
            this.messageService.add({
              severity: 'error',
              summary: 'Service Message',
              detail: 'Error when deleting Grua data!',
            });
          }
        );
      },
    });
  }

  /**
   * Add orchestrator list for service
   */
  public addOrchestratorListRow(): void {
    if (
      this.serviceForm.get('url').valid &&
      this.serviceForm.get('tenantId').valid &&
      this.validURL(this.serviceForm.get('url').value)
    ) {
      this.showSpinner = true;
      const body = {
        customerId: this.selectedCustomer['id'],
        serviceId: this.service['id'],
        url: this.serviceForm.get('url').value,
        tenantId: this.serviceForm.get('tenantId').value,
      };
      this.controllerService.saveOrchestratorList(body).subscribe(
        (result) => {
          this.showSpinner = false;
          this.loadOrchestratorListRow(
            this.selectedCustomer['id'],
            this.service['id']
          );
          this.serviceForm.get('url').setValue('');
          this.serviceForm.get('tenantId').setValue('');
          this.serviceForm.controls['url'].markAsPristine();
          this.serviceForm.controls['url'].markAsUntouched();
          this.serviceForm.controls['tenantId'].markAsPristine();
          this.serviceForm.controls['tenantId'].markAsUntouched();
          this.messageService.add({
            severity: 'success',
            summary: 'Service Message',
            detail: 'Orchestrator list successfully created!',
          });
        },
        (error) => {
          this.showSpinner = false;
          this.messageService.add({
            severity: 'error',
            summary: 'Service Message',
            detail: 'Error when creating orchestrator list!',
          });
        }
      );
    } else {
      this.serviceForm.controls['url'].markAsDirty();
      this.serviceForm.controls['url'].markAsTouched();
      this.serviceForm.controls['tenantId'].markAsDirty();
      this.serviceForm.controls['tenantId'].markAsTouched();
      if (!this.validURL(this.serviceForm.get('url').value)) {
        this.messageService.add({
          severity: 'error',
          summary: 'Service Message',
          detail: 'Entered URL is not valid',
        });
      }
    }
  }

  public validURL(str) {
    const pattern = new RegExp(
      /^(http(s)?:\/\/)[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/
    );
    return !!pattern.test(str);
  }

  /**
   * Load orchestrator list for service
   */
  public loadOrchestratorListRow(customerId: string, serviceId: string): void {
    this.orchestratorList = [];
    this.controllerService
      .loadOrchestratorList(customerId, serviceId)
      .subscribe(
        (result) => {
          this.showSpinner = false;
          if (result['result'].length > 0) {
            this.orchestratorList = result['result'];
          }
        },
        (error) => {
          this.showSpinner = false;
          this.messageService.add({
            severity: 'error',
            summary: 'Service Message',
            detail: 'Error when loading orchestrator list!',
          });
        }
      );
  }

  public addOrchestratorTag(orchestratorRow) {
    this.chosenOrchestrator = orchestratorRow;
    this.loadOrchestratorTags(this.chosenOrchestrator['id']);
    this.tagModal = true;
  }

  public closeTagDialog() {
    this.tagModal = false;
  }

  /**
   * Remove orchestrator list for service
   */
  public removeOrchestratorListRow(orchestratorRow: any): void {
    this.confirmationService.confirm({
      icon: 'pi pi-exclamation-triangle',
      header: 'Confirmation',
      message: 'Are you sure that you want to delete selected row?',
      accept: () => {
        this.showSpinner = true;
        this.controllerService
          .deleteOrchestratorList(orchestratorRow['id'])
          .subscribe(
            (result) => {
              this.showSpinner = false;
              this.loadOrchestratorListRow(
                this.selectedCustomer['id'],
                this.service['id']
              );
              this.messageService.add({
                severity: 'success',
                summary: 'Service Message',
                detail: 'Orchestrator list row successfully deleted!',
              });
            },
            (error) => {
              this.showSpinner = false;
              this.messageService.add({
                severity: 'error',
                summary: 'Service Message',
                detail: 'Error when deleting orchestrator list row!',
              });
            }
          );
      },
    });
  }

  /**
   * Add orchestrator tags for service
   */
  public addOrchestratorTagsRow(): void {
    if (this.tagForm.get('tag').valid) {
      this.showSpinner = true;
      const tags = this.tagForm
        .get('tag')
        .value.split(',')
        .map((item) => item.trim());

      this.orchestratorTags.push(...tags);
      this.tagForm.get('tag').setValue('');
      const body = {
        tags: this.orchestratorTags,
      };
      this.controllerService
        .saveOrchestratorTags(body, this.chosenOrchestrator['id'])
        .subscribe(
          (result) => {
            this.showSpinner = false;
            this.tagForm.get('tag').setValue('');
            this.tagForm.controls['tag'].markAsPristine();
            this.tagForm.controls['tag'].markAsUntouched();
            this.messageService.add({
              severity: 'success',
              summary: 'Service Message',
              detail: 'Orchestrator tags successfully created!',
            });
          },
          (error) => {
            this.showSpinner = false;
            this.messageService.add({
              severity: 'error',
              summary: 'Service Message',
              detail: 'Error when creating orchestrator tag!',
            });
          }
        );
    }
  }

  public loadOrchestratorTags(orchestratorListId): void {
    this.orchestratorTags = [];
    this.showSpinner = true;
    this.controllerService.loadOrchestratorTags(orchestratorListId).subscribe(
      (tags) => {
        this.showSpinner = false;
        if (tags['result']['tags']) {
          this.orchestratorTags = tags['result']['tags'].split(',');
        }
      },
      (error) => {
        this.messageService.add({
          severity: 'error',
          summary: 'Service Message',
          detail: 'Error when creating orchestrator list!',
        });
      }
    );
  }

  public removeOrchestratorTags(orchestratorTagsRow) {
    this.showSpinner = true;
    const index = this.orchestratorTags.indexOf(orchestratorTagsRow);
    if (index > -1) {
      this.orchestratorTags.splice(index, 1);
    }
    const body = {
      tags: this.orchestratorTags,
    };
    this.controllerService
      .saveOrchestratorTags(body, this.chosenOrchestrator['id'])
      .subscribe(
        (result) => {
          this.showSpinner = false;
          this.tagForm.get('tag').setValue('');
          this.tagForm.controls['tag'].markAsPristine();
          this.tagForm.controls['tag'].markAsUntouched();
          this.messageService.add({
            severity: 'success',
            summary: 'Service Message',
            detail: 'Orchestrator tags successfully removed!',
          });
        },
        (error) => {
          this.showSpinner = false;
          this.messageService.add({
            severity: 'error',
            summary: 'Service Message',
            detail: 'Error when creating orchestrator tag!',
          });
        }
      );
  }

  // load all relationships between attribute and service
  private loadAssignedAttributes(serviceId: string): Promise<any> {
    return new Promise((resolve, reject) => {
      this.showSpinner = true;
      this.controllerService
        .loadAssignedAttributesForService(serviceId)
        .subscribe(
          (attributes) => {
            this.assignedAttributes = attributes['result'];
            this.showSpinner = false;
            resolve(resolve);
          },
          (error) => {
            this.showSpinner = false;
            this.messageService.add({
              severity: 'error',
              summary: 'Error when loading attributes for service!',
            });
            reject(error);
          }
        );
    });
  }

  /**
   * Load all mcap credentials
   */
  public loadMcapCredential(): Promise<any> {
    return new Promise((resolve, reject) => {
      this.showSpinner = true;
      this.controllerService.loadAllMcapCredentials().subscribe(
        (credentilas) => {
          this.credentilas = credentilas;
          this.showSpinner = false;
          resolve(resolve);
        },
        (error) => {
          this.showSpinner = false;
          this.messageService.add({
            severity: 'error',
            summary: 'Error when loading credentials!',
          });
          reject(error);
        }
      );
    });
  }

  /**
   * To update the Auto CR Config
   */
  updateCrConfig() {
    if (!this.serviceForm.get('shouldCreateCr').valid) return;
    const crConfig = { ...this.autoCreateCrConfig };
    crConfig['SHOULD_AUTO_CREATE_CR'] =
      this.serviceForm.get('shouldCreateCr').value;
    this.showSpinner = true;
    this.controllerService
      .updateAutoCrCreateConfig(
        this.selectedCustomer['id'],
        this.service['id'],
        crConfig
      )
      .subscribe(
        (config) => {
          this.autoCreateCrConfig = config;
          this.showSpinner = false;
        },
        (error) => {
          console.log(error);
          this.messageService.add({
            severity: 'error',
            summary: 'Unable to update Auto CR Config!',
          });
          this.showSpinner = false;
        }
      );
  }

  /**
   * Generate form group for customer admin ui
   */
  public generateFormGroup(): void {
    this.form = this.fb.group({
      id: new FormControl('', Validators.required),
      name: new FormControl('', Validators.required),
      service: new FormControl('', null),
      // leamName: new FormControl('', Validators.required),
      bcName: new FormControl('', null),
      bcCompanyId: new FormControl('', null),
      crWebId: new FormControl(null, null),
      msimEmail: new FormControl('', null),
      grua: new FormControl('', null),
      active: new FormControl('', Validators.required),
    });
  }

  onOrchestratorChanged(orch) {
    this.serviceForm.get('configYaml').setValue(orch.configYaml);
  }

  public onSaveConfig() {
    const {orchestrator, configYaml} = this.serviceForm.value;
    if(!orchestrator) return null;
    this.showSpinner = true;
    this.controllerService.saveOrchestratorConfig(orchestrator.id, {configYaml})
      .pipe(finalize(() => this.showSpinner = false))
      .subscribe(() => {
        this.messageService.add({
          severity: 'success',
          summary: 'Service Message',
          detail: 'Orchestrator yaml config successfully saved!',
        });
      }, error => {
        console.log(error);
      })
  }

  /**
   * Change status of spinner
   * @params event
   */
  public spinnerChange(event) {
    this.showSpinner = event;
  }

  public closeValidationModal() {
    this.validationModal = false;
  }
  public continue() {
    this.validationModal = false;
    this.modalVisible = false;
  }
}

apm0013173-one-creator\src\app\admin\device-mgmt\device-mgmt.component.css
<div *ngIf="selectedCustomer">
  <div class="ui-g">
    <h6 class="ui-g-6">Customer Device Details</h6>
    <div class="ui-g-6 text-right">
      <p-checkbox (onChange)="showDevicesWithIssues = $event.checked"
                  [(ngModel)]="showDevicesWithIssues" [binary]="true"
                  label="Only Show Devices with Issues ( {{ devicesWithIssues.length}} )">
      </p-checkbox>
    </div>
  </div>

  <div *ngIf="showDevicesWithIssues" class="m-2">

    <ng-container *ngIf="loading">
      <p class="loader-text">
        <i class="pi pi-spin pi-spinner mr-2"></i> loading device details for the customer ...
      </p>
     </ng-container>

    <ng-container *ngIf="devicesWithIssues.length && !loading">
      <p>The following is the list of devices with one or more issues which might impact change execution on SSNM Platform.
        Please identify the issues and fix it on the respective host inventory tool for a smooth experience.</p>
      <p-table [value]="devicesWithIssues"
               [rowHover]="true"
               [loading]="loading"
               [rows]="10"
               [showCurrentPageReport]="true"
               [rowsPerPageOptions]="[10,25,50,100]"
               [paginator]="true"
               showLoader="true"
               [responsive]="true"
               [scrollable]="true">
        <ng-template pTemplate="header">
          <tr>
            <th>Hostname</th>
            <th>Issues</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-device>
          <tr>
            <td>{{device.HOSTNAME}}</td>
            <td>
              <ul class="mb-1">
                <li *ngFor="let issue of device.issues"
                    [ngClass]="{'warning-issue': issue.severity === 'warning','danger-issue': issue.severity === 'danger'}">
                  {{issue.message}}
                </li>
              </ul>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </ng-container>

    <ng-container *ngIf="!devicesWithIssues.length && !loading">
      <p>All the devices of "{{selectedCustomer.name}}" has all the required details. To see all devices please uncheck <em>"Only Show Devices with Issues"</em></p>
    </ng-container>

  </div>

  <div *ngIf="!showDevicesWithIssues" class="m-2">
    <p-table [value]="devices"
             [rowHover]="true"
             [rows]="10"
             [showCurrentPageReport]="true"
             [rowsPerPageOptions]="[10,25,50,100]"
             [paginator]="true"
             [loading]="loading"
             dataKey="id"
             showLoader="true"
             [responsive]="true"
             [scrollable]="true"
             currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
      <ng-template pTemplate="header">
        <tr>
          <th>Hostname</th>
          <th>Service</th>
          <th>Part Number</th>
          <th>Vendor</th>
          <th>Address</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-device>
        <tr>
          <td>{{device.HOSTNAME}}</td>
          <td>{{device.SERVICE}}</td>
          <td>{{device.PARTNUM}}</td>
          <td>{{device.VENDOR}}</td>
          <td>{{device.ADDRESS}}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>

</div>

apm0013173-one-creator\src\app\admin\device-mgmt\device-mgmt.component.css
h6 {
  font-size: 14px;
  font-weight: 700;
  margin-top: 6px;
}


.warning-issue {
  color: peru;
}

.danger-issue {
  color: red
}
.loader-text {
  display: flex;
  align-items: center;
}

:host ::ng-deep .ui-paginator .ui-paginator-current {
  color: #333333;
  height: 2.286em;
  min-width: 2.286em;
  position: absolute;
  left: 0;
}

apm0013173-one-creator\src\app\admin\device-mgmt\device-mgmt.component.ts
import {Component, Input, OnChanges, OnDestroy, OnInit, SimpleChanges} from '@angular/core';
import {ApiConnectService} from '../../template-manager/api-connect.service';
import {Subscription} from 'rxjs';

@Component({
  selector: 'app-device-mgmt',
  templateUrl: './device-mgmt.component.html',
  styleUrls: ['./device-mgmt.component.css']
})
export class DeviceMgmtComponent implements OnInit, OnChanges, OnDestroy {
  @Input() selectedCustomer: any = null;
  showDevicesWithIssues = true;
  loading: boolean;
  devices: any[] = [];
  devicesWithIssues: any[] = [];
  subscriptions: Subscription[] = [];
  constructor(private apiConnectionService: ApiConnectService) { }

  ngOnInit(): void {
  }

  ngOnChanges(changes: SimpleChanges) {
    const { selectedCustomer } = changes;
    if ('id' in selectedCustomer.currentValue) {
      this.loadDevices(selectedCustomer.currentValue.id)
    }
  }

  sortDevicesWithIssues(devices: any[]) {
    const devicesWithIssues = [];
    devices.forEach(device => {
      const issues = [];
      // Check if Address
      if(!device.ADDRESS) {
        issues.push({
          severity: 'warning',
          message: 'The device does not have a valid Address!'
        });
      }
      // Check for Vendor
      if(!device.VENDOR) {
        issues.push({
          severity: 'danger',
          message: 'The device is missing Vendor information!'
        });
      }
      // Check for Service
      if(!device.SERVICE) {
        issues.push({
          severity: 'danger',
          message: 'Service line is missing for this device!'
        });
      }
      // Push this if any issues are found
      if(issues.length) {
        devicesWithIssues.push({ ... device, issues});
      }
    });
    return devicesWithIssues;
  }

  loadDevices(customerId: number) {
    this.loading = true;
    const subscription = this.apiConnectionService
      .getHostnamesByCustomer(customerId)
      .subscribe(devices => {
        this.devices = devices;
        this.devicesWithIssues = this.sortDevicesWithIssues(devices);
        this.loading = false;
        }, error => {
        console.error(error);
        this.devices = [];
        this.loading = false;
      });
    this.subscriptions.push(subscription);
  }

  ngOnDestroy() {
    this.subscriptions.forEach(subscription => {
      if(subscription) {
        subscription.unsubscribe();
      }
    })
  }
}

apm0013173-one-creator\src\app\admin\permission-manager\permission-manager.component.html
<p-fieldset legend="Access">
    <form *ngIf="perForm" [formGroup]="perForm">
        <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
            <div class="ui-grid-row">
                <div class="ui-grid-col-3">
                    Group:
                </div>
                <div class="ui-grid-col-6">
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-2">
                            <button id="btn_add" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="addGroup()"></button>
                        </div>
                        <div class="ui-grid-col-10">
                            <p-dropdown class="ui-dropdown-label" optionLabel="IDENTIFICATOR" [options]="groups" filter="true"
                            placeholder="Please select group" formControlName="group"
                            required="true"></p-dropdown>
                        </div>
                    </div>
                    <div *ngIf="assignedGroups" class="sections">
                        <div *ngFor="let group of assignedGroups; let i = index" class="section">
                            <button id="btn_remove" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-minus" 
                            class="ui-button-info" (click)="removeGroup(group)" [disabled]="group['inherited']" [tooltipDisabled]="!group['inherited']"
                            pTooltip="You can't remove this permission because is inherited!" tooltipPosition="left"></button>
                            {{group.IDENTIFICATOR}}
                        </div>
                    </div>
                </div>
                <div class="ui-grid-col-3">
                    <p-message severity="warn" text="This field is required!" *ngIf="!perForm.controls['group'].valid&&perForm.controls['group'].dirty"></p-message>
                </div>
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-3">
                    Individual:
                </div>
                <div class="ui-grid-col-6">
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-2">
                            <button id="btn_add" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="addUser()"></button>
                        </div>
                        <div class="ui-grid-col-10">
                            <p-dropdown class="ui-dropdown-label" [options]="usersForDropdown" filter="true"
                            filterBy="label,value.ATTUID" placeholder="Please select user" formControlName="user"
                            required="true"></p-dropdown>
                        </div>
                    </div>
                    <div *ngIf="assignedUsers" class="sections">
                        <div *ngFor="let user of assignedUsers; let i = index" class="section">
                            <button id="btn_remove" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-minus" 
                            class="ui-button-info" (click)="removeUser(user)" [disabled]="user['inherited']" [tooltipDisabled]="!user['inherited']"
                            pTooltip="You can't remove this permission because is inherited!" tooltipPosition="left"></button>
                            {{user.NAME}} - {{user.ATTUID}}
                        </div>
                    </div>
                </div>
                <div class="ui-grid-col-3">
                    <p-message severity="warn" text="This field is required!" *ngIf="!perForm.controls['user'].valid&&perForm.controls['user'].dirty"></p-message>
                </div>
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-3">
                    Business center:
                </div>
                <div class="ui-grid-col-6">
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-2">
                            <button id="btn_add" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="addCustomer()"></button>
                        </div>
                        <div class="ui-grid-col-10">
                            <p-dropdown class="ui-dropdown-label" optionLabel="NAME" [options]="customers" filter="true"
                            placeholder="Please select bc user" formControlName="customer"
                            required="true"></p-dropdown>
                        </div>
                    </div>
                    <div *ngIf="assignedCustomers" class="sections">
                        <div *ngFor="let customer of assignedCustomers; let i = index" class="section">
                            <button id="btn_remove" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-minus"
                            class="ui-button-info" (click)="removeCustomer(customer)" [disabled]="customer['inherited']" [tooltipDisabled]="!customer['inherited']"
                            pTooltip="You can't remove this permission because is inherited!" tooltipPosition="left"></button>
                            {{customer.NAME}} - {{customer.BC_USER_ID}}
                        </div>
                    </div>
                </div>
                <div class="ui-grid-col-3">
                    <p-message severity="warn" text="This field is required!" *ngIf="!perForm.controls['customer'].valid&&perForm.controls['customer'].dirty"></p-message>
                </div>
            </div>
        </div>
    </form>
</p-fieldset>

apm0013173-one-creator\src\app\admin\permission-manager\permission-manager.component.scss
#btn_remove {
    background: transparent !important;
    color: rgb(207,42,42) !important;
    border: none !important;
}

#btn_add {
    background: transparent !important;
    color: #188650 !important;
    border: none !important;
}

apm0013173-one-creator\src\app\admin\permission-manager\permission-manager.component.ts
import { Component, OnInit, Input, ViewEncapsulation, OnChanges, Output, EventEmitter } from '@angular/core';
import { FormGroup, FormBuilder, Validators, FormControl } from '@angular/forms';
import { MessageService, ConfirmationService, SelectItem } from 'primeng/api';
import {ControllerService} from "../../services/controller.service";

@Component({
  selector: 'app-permission-manager',
  templateUrl: './permission-manager.component.html',
  styleUrls: ['./permission-manager.component.scss'],
  encapsulation: ViewEncapsulation.None
})

export class PermissionManagerComponent implements OnInit, OnChanges {
  @Input() service: any = {};
  @Input() customer: any = {};
  @Input() dataFromActionTemplate: any = {};
  @Input() template: any = {};
  @Output() eventEmitter = new EventEmitter<any>();
  users: any[] = [];
  usersForDropdown: SelectItem[] = [];
  assignedUsers: any[] = [];
  groups: any[] = [];
  assignedGroups: any[] = [];
  customers: any[] = [];
  assignedCustomers: any[] = [];
  perForm: FormGroup;

  constructor(private fb: FormBuilder,
    private messageService: MessageService,
    private confirmationService: ConfirmationService,
    private controller: ControllerService) {
    this.generateFormGroup();
  }

  ngOnInit(): void {
  }

  ngOnChanges(): void {
    // reset and load options for dropdowns
    this.assignedUsers = [];
    let assignedTemp = [];
    this.assignedGroups = [];
    this.assignedCustomers = [];
    this.perForm.reset();
    this.controller.getExistingUsersFromDB().subscribe(result => {
      this.users = result;
      this.usersForDropdown = [];
      for (let i = 0; i < this.users.length; i++) {
        this.usersForDropdown.push({
          label: this.users[i]["NAME"],
          value: {
            ATTUID: this.users[i]["ATTUID"],
            ID: this.users[i]["ID"],
            NAME: this.users[i]["NAME"]
          }
        });
      }
    }, error => {
      this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading users!', sticky: true });
    });
    this.controller.getRoles().subscribe(result => {
      this.groups = result;
    }, error => {
      this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading roles!', sticky: true });
    });
    this.controller.getBcUsers().subscribe(result => {
      this.customers = result;
    }, error => {
      this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading bc users!', sticky: true });
    });
    if (this.customer['id'] && this.service['id']) {
      // load assigned users, roles and bc users on services
      this.controller.getUsersForServiceAndCustomer(this.customer['id'], this.service['id']).subscribe(result => {
        assignedTemp = [];
        if (result && result['result']) {
          assignedTemp = result['result'];
          if (assignedTemp.length > 0) {
            assignedTemp.map(data => {
              this.assignedUsers.push(data);
            });
          }
        }
      }, error => {
        this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned users!', sticky: true });
      });
      this.controller.getRolesForServiceAndCustomer(this.customer['id'], this.service['id']).subscribe(result => {
        assignedTemp = [];
        if (result && result['result']) {
          assignedTemp = result['result'];
          if (assignedTemp.length > 0) {
            assignedTemp.map(data => {
              this.assignedGroups.push(data);
            });
          }
        }
      }, error => {
        this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned roles!', sticky: true });
      });
      this.controller.getBcUserForServiceAndCustomer(this.customer['id'], this.service['id']).subscribe(bcUsers => {
        assignedTemp = [];
        if (bcUsers && bcUsers['result']) {
          assignedTemp = bcUsers['result'];
          if (assignedTemp.length > 0) {
            assignedTemp.map(data => {
              this.assignedCustomers.push(data);
            });
          }
        }
      }, error => {
        this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned bc users!', sticky: true });
      });
    } else if (this.template['id']) {
      // load inheritage permissions from relationship between customer and service
      if (this.dataFromActionTemplate['customerId'] && this.dataFromActionTemplate["serviceId"]) {
        this.controller.getUsersForServiceAndCustomer(this.dataFromActionTemplate['customerId'], this.dataFromActionTemplate["serviceId"]).subscribe(result => {
          assignedTemp = [];
          if (result && result['result']) {
            for (let i = 0; i < result['result'].length; i++) {
              result['result'][i]['inherited'] = true;
            }
            assignedTemp = result['result'];
            if (assignedTemp.length > 0) {
              assignedTemp.map(data => {
                this.assignedUsers.push(data);
              });
            }
          }
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned users!', sticky: true });
        });
        this.controller.getRolesForServiceAndCustomer(this.dataFromActionTemplate['customerId'], this.dataFromActionTemplate["serviceId"]).subscribe(result => {
          assignedTemp = [];
          if (result && result['result']) {
            for (let i = 0; i < result['result'].length; i++) {
              result['result'][i]['inherited'] = true;
            }
            assignedTemp = result['result'];
            if (assignedTemp.length > 0) {
              assignedTemp.map(data => {
                this.assignedGroups.push(data);
              });
            }

          }
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned roles!', sticky: true });
        });
        this.controller.getBcUserForServiceAndCustomer(this.dataFromActionTemplate['customerId'], this.dataFromActionTemplate["serviceId"]).subscribe(bcUsers => {
          assignedTemp = [];
          if (bcUsers && bcUsers['result']) {
            for (let i = 0; i < bcUsers['result'].length; i++) {
              bcUsers['result'][i]['inherited'] = true;
            }
            assignedTemp = bcUsers['result'];
            if (assignedTemp.length > 0) {
              assignedTemp.map(data => {
                this.assignedCustomers.push(data);
              });
            }
          }
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned bc users!', sticky: true });
        });
      } else if (this.dataFromActionTemplate["serviceId"]) {
        // load inheritage permissions from general service permissions
        this.controller.getUserForServices(this.dataFromActionTemplate["serviceId"]).subscribe(result => {
          assignedTemp = [];
          if (result && result['result']) {
            for (let i = 0; i < result['result'].length; i++) {
              result['result'][i]['inherited'] = true;
            }
            assignedTemp = result['result']
            if (assignedTemp.length > 0) {
              assignedTemp.map(data => {
                this.assignedUsers.push(data);
              });
            }
          }
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned users!', sticky: true });
        });
        this.controller.getRolesForServices(this.dataFromActionTemplate["serviceId"]).subscribe(result => {
          assignedTemp = [];
          if (result && result['result']) {
            for (let i = 0; i < result['result'].length; i++) {
              result['result'][i]['inherited'] = true;
            }
            assignedTemp = result['result'];
            if (assignedTemp.length > 0) {
              assignedTemp.map(data => {
                this.assignedGroups.push(data);
              });
            }
          }
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned roles!', sticky: true });
        });
        this.controller.getBcUserForServices(this.dataFromActionTemplate["serviceId"]).subscribe(bcUsers => {
          assignedTemp = [];
          if (bcUsers && bcUsers['result']) {
            for (let i = 0; i < bcUsers['result'].length; i++) {
              bcUsers['result'][i]['inherited'] = true;
            }
            assignedTemp = bcUsers['result'];
            if (assignedTemp.length > 0) {
              assignedTemp.map(data => {
                this.assignedCustomers.push(data);
              });
            }
          }
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned bc users!', sticky: true });
        });
      }
      // load assigned users, roles and bc users on action template
      this.controller.getTemplateToUser(this.template['id']).subscribe(users => {
        this.assignedUsers.concat(users);
        if (users.length > 0) {
          users.map(data => {
            this.assignedUsers.push(data);
          });
        }
      }, error => {
        this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned users!', sticky: true });
      });
      this.controller.getTemplateToRole(this.template['id']).subscribe(roles => {
        if (roles.length > 0) {
          roles.map(data => {
            this.assignedGroups.push(data);
          });
        }
      }, error => {
        this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned roles!', sticky: true });
      });
      this.controller.getTemplateToBcUser(this.template['id']).subscribe(roles => {
        if (roles.length > 0) {
          roles.map(data => {
            this.assignedCustomers.push(data);
          });
        }
      }, error => {
        this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned roles!', sticky: true });
      });
    } else if (!this.customer['id'] && this.service['id']) {
      this.controller.getUserForServices(this.service['id']).subscribe(result => {
        assignedTemp = [];
        if (result && result['result']) {
          assignedTemp = result['result'];
          if (assignedTemp.length > 0) {
            assignedTemp.map(data => {
              this.assignedUsers.push(data);
            });
          }
        }
      }, error => {
        this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned users!', sticky: true });
      });
      this.controller.getRolesForServices(this.service['id']).subscribe(result => {
        assignedTemp = [];
        if (result && result['result']) {
          assignedTemp = result['result'];
          if (assignedTemp.length > 0) {
            assignedTemp.map(data => {
              this.assignedGroups.push(data);
            });
          }
        }
      }, error => {
        this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned roles!', sticky: true });
      });
      this.controller.getBcUserForServices(this.service['id']).subscribe(bcUsers => {
        assignedTemp = [];
        if (bcUsers && bcUsers['result']) {
          assignedTemp = bcUsers['result'];
          if (assignedTemp.length > 0) {
            assignedTemp.map(data => {
              this.assignedCustomers.push(data);
            });
          }
        }
      }, error => {
        this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when loading assigned bc users!', sticky: true });
      });
    }
  }

  /**
   * Generate form group for permission manager
   */
  public generateFormGroup(): void {
    this.perForm = this.fb.group({
      user: new FormControl('', Validators.required),
      group: new FormControl('', Validators.required),
      customer: new FormControl('', Validators.required)
    });
  }

  /**
   * Create permission for user
   */
  public addUser() {
    if (this.perForm.controls['user'].valid) {
      this.eventEmitter.emit(true);
      if (this.customer['id'] && this.service['id']) {
        // add user permission for service
        this.controller.createIndividualAccess({
          "customerId": this.customer['id'],
          "serviceId": this.service['id'],
          "userId": this.perForm.get('user').value['ID']
        }).subscribe(result => {
          this.messageService.add({
            severity: 'success',
            summary: 'Successfull created',
            detail: 'Permission for user successfully created!'
          });
          this.assignedUsers.push({ ID: this.perForm.get('user').value['ID'], NAME: this.perForm.get('user').value['NAME'], ATTUID: this.perForm.get('user').value['ATTUID'], BC_USER_ID: this.perForm.get('user').value['BC_USER_ID'], });
          this.perForm.controls['user'].reset();
          this.eventEmitter.emit(false);
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when creating permission for user!', sticky: true });
          this.eventEmitter.emit(false);
        });
      } else if (this.template['id']) {
        // add user permission for action template
        const user = { ID: this.perForm.get('user').value['ID'], NAME: this.perForm.get('user').value['NAME'], ATTUID: this.perForm.get('user').value['ATTUID'], BC_USER_ID: this.perForm.get('user').value['BC_USER_ID'] };
        if (!(this.assignedUsers.filter(usr => usr.ID === user.ID && usr.NAME === user.NAME && usr.ATTUID === user.ATTUID).length > 0)) {
          this.controller.assignTemplateToUser(
            this.perForm.get('user').value['ID'],
            this.template['id']
          ).subscribe(result => {
            this.messageService.add({
              severity: 'success',
              summary: 'Successfull created',
              detail: 'Permission for user successfully created!'
            });
            this.assignedUsers.push(user);
            this.perForm.controls['user'].reset();
            this.eventEmitter.emit(false);
          }, error => {
            this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when creating permission for user!', sticky: true });
            this.eventEmitter.emit(false);
          });
        } else {
          this.eventEmitter.emit(false);
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'You can not add permission for ' + user.NAME + ' user because is inherited!', sticky: true });
        }
      } else if (!this.customer['id'] && this.service['id']) {
        this.controller.createIndividualAccessForService(
          this.perForm.get('user').value['ID'], this.service['id'],
        ).subscribe(result => {
          this.eventEmitter.emit(true);
          this.messageService.add({
            severity: 'success',
            summary: 'Successfull created',
            detail: 'Permission for user successfully created!'
          });
          this.assignedUsers.push({ ID: this.perForm.get('user').value['ID'], NAME: this.perForm.get('user').value['NAME'], ATTUID: this.perForm.get('user').value['ATTUID'], BC_USER_ID: this.perForm.get('user').value['BC_USER_ID'], });
          this.perForm.controls['user'].reset();
          this.eventEmitter.emit(false);
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when creating permission for user!', sticky: true });
          this.eventEmitter.emit(false);
        });
      }
    } else {
      this.perForm.controls['user'].markAsDirty();
      this.perForm.controls['user'].markAsTouched();
    }
  }

  /**
   * Delete permission for selected user
   */
  public removeUser(user) {
    this.confirmationService.confirm({
      icon: 'pi pi-exclamation-triangle',
      header: 'Confirmation',
      message: 'Are you sure that you want to delete permission for "' + user['NAME'] + '"?',
      accept: () => {
        this.eventEmitter.emit(true);
        if (this.customer['id'] && this.service['id']) {
          // remove user permission for service
          this.controller.deleteUsersForServiceAndCustomer(this.customer['id'],
            this.service['id'],
            user['ID']
          ).subscribe(result => {
            const checkUserPermission = (userCheck) => userCheck['ID'] == user['ID'];
            const userIndex = this.assignedUsers.findIndex(checkUserPermission);
            this.assignedUsers.splice(userIndex, 1);
            this.eventEmitter.emit(false);
            this.messageService.add({ severity: 'success', summary: 'Service Message', detail: 'Permission successfully deleted!' });
          }, error => {
            this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when deleting permission!', sticky: true });
            this.eventEmitter.emit(false);
          });
        } else if (this.template['id']) {
          // remove user permission for action template
          this.controller.deleteUsersForActionTemplate(
            user['ID'],
            this.template['id']
          ).subscribe(result => {
            const checkUserPermission = (userCheck) => userCheck['ID'] == user['ID'];
            const userIndex = this.assignedUsers.findIndex(checkUserPermission);
            this.assignedUsers.splice(userIndex, 1);
            this.eventEmitter.emit(false);
            this.messageService.add({ severity: 'success', summary: 'Service Message', detail: 'Permission successfully deleted!' });
          }, error => {
            this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when deleting permission!', sticky: true });
            this.eventEmitter.emit(false);
          });
        }
        if (!this.customer['id'] && this.service['id']) {
          this.controller
            .deleteUsersForService(
              this.service["id"],
              user["ID"]
            )
            .subscribe(
              (result) => {
                this.eventEmitter.emit(true);
                const checkUserPermission = (userCheck) =>
                  userCheck["ID"] == user["ID"];
                const userIndex = this.assignedUsers.findIndex(
                  checkUserPermission
                );
                this.assignedUsers.splice(userIndex, 1);
                this.eventEmitter.emit(false);
                this.messageService.add({ severity: 'success', summary: 'Service Message', detail: 'Permission successfully deleted!' });
              },
              (error) => {
                this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when deleting permission!', sticky: true });
                this.eventEmitter.emit(false);
              }
            );
        }
      }
    });
  }

  /**
   * Create permission for group
   */
  public addGroup() {
    if (this.perForm.controls['group'].valid) {
      this.eventEmitter.emit(true);
      if (this.customer['id'] && this.service['id']) {
        // add role permission for service
        this.controller.createRoleAccess({
          customerId: this.customer['id'],
          serviceId: this.service['id'],
          roleId: this.perForm.get('group').value['ID']
        }).subscribe(result => {
          this.messageService.add({
            severity: 'success',
            summary: 'Successfull created',
            detail: 'Permission for group successfully created!'
          });
          this.assignedGroups.push({ ID: this.perForm.get('group').value['ID'], IDENTIFICATOR: this.perForm.get('group').value['IDENTIFICATOR'] });
          this.perForm.controls['group'].reset();
          this.eventEmitter.emit(false);
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when creating permission!', sticky: true });
          this.eventEmitter.emit(false);
        });
      } else if (this.template['id']) {
        // add user permission for action template
        const role = { ID: this.perForm.get('group').value['ID'], IDENTIFICATOR: this.perForm.get('group').value['IDENTIFICATOR'] };
        if (!(this.assignedGroups.filter(group => group.ID === role.ID && group.IDENTIFICATOR === role.IDENTIFICATOR).length > 0)) {
          this.controller.assignTemplateToRole(
            this.perForm.get('group').value['ID'],
            this.template['id']
          ).subscribe(result => {
            this.messageService.add({
              severity: 'success',
              summary: 'Successfull created',
              detail: 'Permission for group successfully created!'
            });
            this.assignedGroups.push(role);
            this.perForm.controls['group'].reset();
            this.eventEmitter.emit(false);
          }, error => {
            this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when creating permission!', sticky: true });
            this.eventEmitter.emit(false);
          });
        } else {
          this.eventEmitter.emit(false);
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'You can not add permission for ' + role.IDENTIFICATOR + ' role because is inherited!', sticky: true });
        }
      } else if (!this.customer['id'] && this.service['id']) {
        this.controller.createRoleAccessForService(
          this.perForm.get('group').value['ID'],
          this.service['id']
        ).subscribe(result => {
          this.messageService.add({
            severity: 'success',
            summary: 'Successfull created',
            detail: 'Permission for group successfully created!'
          });
          this.assignedGroups.push({ ID: this.perForm.get('group').value['ID'], IDENTIFICATOR: this.perForm.get('group').value['IDENTIFICATOR'] });
          this.perForm.controls['group'].reset();
          this.eventEmitter.emit(false);
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when creating permission!', sticky: true });
          this.eventEmitter.emit(false);
        });
      }
    } else {
      this.perForm.controls['group'].markAsDirty();
      this.perForm.controls['group'].markAsTouched();
    }
  }

  /**
   * Delete permission for selected group
   */
  public removeGroup(group) {
    this.confirmationService.confirm({
      icon: 'pi pi-exclamation-triangle',
      header: 'Confirmation',
      message: 'Are you sure that you want to delete permission for "' + group['IDENTIFICATOR'] + '" role?',
      accept: () => {
        this.eventEmitter.emit(true);
        if (this.customer['id'] && this.service['id']) {
          // remove role permission for service
          this.controller.deleteRoleForServiceAndCustomer(this.customer['id'],
            this.service['id'],
            group['ID']
          ).subscribe(result => {
            const checkRolePermission = (roleCheck) => roleCheck['ID'] == group['ID'];
            const roleIndex = this.assignedGroups.findIndex(checkRolePermission);
            this.assignedGroups.splice(roleIndex, 1);
            this.eventEmitter.emit(false);
            this.messageService.add({ severity: 'success', summary: 'Service Message', detail: 'Permission successfully deleted!' });
          }, error => {
            this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when deleting permission!', sticky: true });
            this.eventEmitter.emit(false);
          });
        } else if (this.template['id']) {
          // remove role permission for action template
          this.controller.deleteRoleForActionTemplate(
            group['ID'],
            this.template['id']
          ).subscribe(result => {
            const checkRolePermission = (roleCheck) => roleCheck['ID'] == group['ID'];
            const roleIndex = this.assignedGroups.findIndex(checkRolePermission);
            this.assignedGroups.splice(roleIndex, 1);
            this.eventEmitter.emit(false);
            this.messageService.add({ severity: 'success', summary: 'Service Message', detail: 'Permission successfully deleted!' });
          }, error => {
            this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when deleting permission!', sticky: true });
            this.eventEmitter.emit(false);
          });
        } else if (!this.customer['id'] && this.service['id']) {
          this.controller
            .deleteRoleForService(
              this.service["id"],
              group["ID"]
            )
            .subscribe(
              (result) => {
                const checkRolePermission = (roleCheck) =>
                  roleCheck["ID"] == group["ID"];
                const roleIndex = this.assignedGroups.findIndex(
                  checkRolePermission
                );
                this.assignedGroups.splice(roleIndex, 1);
                this.eventEmitter.emit(false);
                this.messageService.add({ severity: 'success', summary: 'Service Message', detail: 'Permission successfully deleted!' });
              },
              (error) => {
                this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when deleting permission!', sticky: true });
                this.eventEmitter.emit(false);
              }
            );
        }
      }
    });
  }

  /**
   * Create permission for customer
   */
  public addCustomer() {
    if (this.perForm.controls['customer'].valid) {
      this.eventEmitter.emit(true);
      if (this.customer['id'] && this.service['id']) {
        // add bc user permission for service
        this.controller.createBcUserAccess({
          customerId: this.customer['id'],
          serviceId: this.service['id'],
          userId: this.perForm.get('customer').value['ID']
        }).subscribe(result => {
          this.messageService.add({
            severity: 'success',
            summary: 'Successfull created',
            detail: 'Permission for customer successfully created!'
          });
          this.assignedCustomers.push({ ID: this.perForm.get('customer').value['ID'], NAME: this.perForm.get('customer').value['NAME'], BC_USER_ID: this.perForm.get('customer').value['BC_USER_ID'] });
          this.perForm.controls['customer'].reset();
          this.eventEmitter.emit(false);
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when creating permission!', sticky: true });
          this.eventEmitter.emit(false);
        });
      } else if (this.template['id']) {
        // add bc user permission for action template
        const customer = { ID: this.perForm.get('customer').value['ID'], NAME: this.perForm.get('customer').value['NAME'], BC_USER_ID: this.perForm.get('customer').value['BC_USER_ID'] };
        if (!(this.assignedCustomers.filter(cust => cust.ID === customer.ID && cust.NAME === customer.NAME && cust.BC_USER_ID === customer.BC_USER_ID).length > 0)) {
          this.controller.assignTemplateToBCUser(
            this.perForm.get('customer').value['ID'],
            this.template['id']
          ).subscribe(result => {
            this.messageService.add({
              severity: 'success',
              summary: 'Successfull created',
              detail: 'Permission for customer successfully created!'
            });
            this.assignedCustomers.push(customer);
            this.perForm.controls['customer'].reset();
            this.eventEmitter.emit(false);
          }, error => {
            this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when creating permission!', sticky: true });
            this.eventEmitter.emit(false);
          });
        } else {
          this.eventEmitter.emit(false);
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'You can not add permission for ' + customer.NAME + ' customer because is inherited!', sticky: true });
        }
      } else if (!this.customer['id'] && this.service['id']) {
        this.controller.createBcUserAccessForService(
          this.perForm.get('customer').value['ID'],
          this.service['id']
        ).subscribe(result => {
          this.messageService.add({
            severity: 'success',
            summary: 'Successfull created',
            detail: 'Permission for customer successfully created!'
          });
          this.assignedCustomers.push({ ID: this.perForm.get('customer').value['ID'], NAME: this.perForm.get('customer').value['NAME'], BC_USER_ID: this.perForm.get('customer').value['BC_USER_ID'] });
          this.perForm.controls['customer'].reset();
          this.eventEmitter.emit(false);
        }, error => {
          this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when creating permission!', sticky: true });
          this.eventEmitter.emit(false);
        });
      }
    } else {
      this.perForm.controls['customer'].markAsDirty();
      this.perForm.controls['customer'].markAsTouched();
    }
  }

  /**
   * Delete permission for selected customer
   */
  public removeCustomer(customer) {
    this.confirmationService.confirm({
      icon: 'pi pi-exclamation-triangle',
      header: 'Confirmation',
      message: 'Are you sure that you want to delete permission for "' + customer['NAME'] + '"?',
      accept: () => {
        this.eventEmitter.emit(true);
        if (this.customer['id'] && this.service['id']) {
          // remove bc user permission for service
          this.controller.deleteBcUserForServiceAndCustomer(this.customer['id'],
            this.service['id'],
            customer['ID'])
            .subscribe(result => {
              const checkBcUserPermission = (userCheck) => userCheck['ID'] == customer['ID'];
              const bcUserIndex = this.assignedCustomers.findIndex(checkBcUserPermission);
              this.assignedCustomers.splice(bcUserIndex, 1);
              this.eventEmitter.emit(false);
              this.messageService.add({ severity: 'success', summary: 'Service Message', detail: 'Permission successfully deleted!' });
            }, error => {
              this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when deleting permission!', sticky: true });
              this.eventEmitter.emit(false);
            });
        } else if (this.template['id']) {
          // remove bc user permission for action template
          this.controller.deleteBcUserForActionTemplate(
            customer['ID'],
            this.template['id']
          ).subscribe(result => {
            const checkBcUserPermission = (userCheck) => userCheck['ID'] == customer['ID'];
            const bcUserIndex = this.assignedCustomers.findIndex(checkBcUserPermission);
            this.assignedCustomers.splice(bcUserIndex, 1);
            this.eventEmitter.emit(false);
            this.messageService.add({ severity: 'success', summary: 'Service Message', detail: 'Permission successfully deleted!' });
          }, error => {
            this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when deleting permission!', sticky: true });
            this.eventEmitter.emit(false);
          });
        } else if (!this.customer['id'] && this.service['id']) {
          this.controller
            .deleteBcUserForService(this.service["id"], customer["ID"])
            .subscribe(
              (result) => {
                const checkBcUserPermission = (userCheck) =>
                  userCheck["ID"] == customer["ID"];
                const bcUserIndex = this.assignedCustomers.findIndex(
                  checkBcUserPermission
                );
                this.assignedCustomers.splice(bcUserIndex, 1);
                this.eventEmitter.emit(false);
                this.messageService.add({ severity: 'success', summary: 'Service Message', detail: 'Permission successfully deleted!' });
              },
              (error) => {
                this.messageService.add({ severity: 'error', summary: 'Service Message', detail: 'Error when deleting permission!', sticky: true });
                this.eventEmitter.emit(false);
              }
            );
        }
      }
    });
  }
}

apm0013173-one-creator\src\app\admin\service-administration\service-administration.component.html
<div class="application_loading" *ngIf="showSpinner">
  <p-progressSpinner animationDuration=".8s"></p-progressSpinner>
</div>

<form [formGroup]="form">
  <div [ngClass]="{disabled: isDisabled}">
    <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
      <div class="ui-grid-row">
        <div class="ui-grid-col-2">
          Service name <span id="marker_required">*</span>:
        </div>
        <div class="ui-grid-col-6">
          <input pInputText type="text" [formControl]="form.controls['serviceName']" placeholder="Required" required="true" />
        </div>
        <div class="ui-grid-col-4">
          <p-message severity="warn" text="This field is required!" *ngIf="!form.controls['serviceName'].valid&&form.controls['serviceName'].dirty"></p-message>
        </div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2">
          Attributes :
        </div>
        <div class="ui-grid-col-6">
            <div class="ui-grid-row">
                <div class="ui-grid-col-1">
                    <button id="btn_add" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="addAttribute()"></button>
                </div>
                <div class="ui-grid-col-11">
                    <p-dropdown class="ui-dropdown-label" optionLabel="name" [options]="attributeList" filter="true"
                    placeholder="Please select attribute" [formControl]="form.controls['serviceAttribute']"
                    required="true"></p-dropdown>
                </div>
            </div>
            <div *ngIf="assignedAttributes" class="sections">
                <div *ngFor="let attribute of assignedAttributes; let i = index" class="section">
                    <button id="btn_remove" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-minus" class="ui-button-info" (click)="removeAttribute(attribute)"></button>
                    {{attribute.name}}
                </div>
            </div>
        </div>
        <div class="ui-grid-col-4">
            <p-message severity="warn" text="This field is required!" *ngIf="!form.controls['serviceAttribute'].valid&&form.controls['serviceAttribute'].dirty"></p-message>
        </div>
      </div>
    </div>
    <button pButton type="button" style="width: 100px;" iconPos="left" icon="fa fa-save" class="ui-button-info"
    (click)="updateService()" label="Update"></button>
    <app-permission-manager (eventEmitter)="spinnerChange($event)" [service]=(selectedService)></app-permission-manager>
  </div>
</form>

apm0013173-one-creator\src\app\admin\service-administration\service-administration.component.css

apm0013173-one-creator\src\app\admin\service-administration\service-administration.component.ts
import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';
import { FormGroup, FormBuilder, Validators, FormControl } from '@angular/forms';
import { MessageService, ConfirmationService } from 'primeng/api';
import {ControllerService} from '../../services/controller.service';

@Component({
  selector: 'app-service-administration',
  templateUrl: './service-administration.component.html',
  styleUrls: ['./service-administration.component.css']
})
export class ServiceAdministrationComponent implements OnInit {
  @Input() selectedService: any = {};
  @Output() eventEmitter = new EventEmitter<any>();
  form: FormGroup;
  services: any = [];
  service: any = {};
  isDisabled = true;
  showSpinner: boolean = false;
  attributeList: any = null;
  assignedAttributes: any = null;

  constructor(private controllerService: ControllerService,
    private fb: FormBuilder,
    private messageService: MessageService,
    private confirmationService: ConfirmationService,
    ) {
    this.form = this.fb.group({
      serviceName: new FormControl('', Validators.required),
      serviceAttribute: new FormControl('', Validators.required)
    });
  }

  ngOnInit(): void {
    this.isDisabled = Object.keys(this.selectedService).length === 0;
  }

  ngOnChanges() {
    this.attributeList = null;
    this.assignedAttributes = null;
    this.isDisabled = Object.keys(this.selectedService).length === 0;
    this.loadService();
    if(this.selectedService && this.selectedService['serviceName']){
      this.loadAllAttributesForService();
      this.loadAssignedAttributes(this.selectedService['id']);
    }
  }

  public loadService(): void{
    this.form.get('serviceName').setValue(this.selectedService['serviceName']);
    this.service = this.selectedService;
  }

  // update service properties (now only name)
  public updateService(): void{
    if(this.form.controls['serviceName'].valid){
      this.showSpinner = true;
      this.controllerService.updateService(this.selectedService['id'],this.form.get('serviceName').value).subscribe((service)=>{
        this.showSpinner = false;
        this.messageService.add({ severity: 'success', summary: 'Service properties is successfully updated!', detail:'' });
      }, error =>{
        this.showSpinner = false;
        this.messageService.add({ severity: 'error', summary: 'Error when updating service propeties!' });
      });
    } else {
      this.form.controls['serviceName'].markAsDirty();
      this.form.controls['serviceName'].markAsTouched();
    }
  }

  public spinnerChange(event): void{
    this.showSpinner = event;
  }

  // load all avaliable attributes which can be assigned to service
  private loadAllAttributesForService(): void{
    this.showSpinner = true;
    this.controllerService.loadAllAttributesForService().subscribe(attributes => {
      this.attributeList = attributes["result"];
      this.showSpinner = false;
    }, error =>{
      this.showSpinner = false;
      this.messageService.add({ severity: 'error', summary: 'Error when loading attributes!' });
    });
  }

  // load all relationships between attribute and service
  private loadAssignedAttributes(serviceId: string): void {
    this.showSpinner = true;
    this.controllerService.loadAssignedAttributesForService(serviceId).subscribe(attributes => {
      this.assignedAttributes = attributes["result"];
      this.showSpinner = false;
    }, error =>{
      this.showSpinner = false;
      this.messageService.add({ severity: 'error', summary: 'Error when loading attributes for service!' });
    });
  }

  // create relationship between attribute and service
  public addAttribute(): void{
    if(this.form.controls['serviceAttribute'].valid){
      this.showSpinner = true;
      const serviceId = this.selectedService['id'];
      const attributeId = this.form.get("serviceAttribute").value["id"];
      this.controllerService.assigneAttributeForService(serviceId, attributeId).subscribe(result => {
        this.messageService.add({
          severity: 'success',
          summary: 'Successfull assigned',
          detail: 'Attribute is successfully assigned!'
        });
        this.assignedAttributes.push({ id: attributeId, name : this.form.get("serviceAttribute").value["name"] });
        this.form.controls['serviceAttribute'].reset();
        this.showSpinner = false;
      }, error =>{
        this.form.controls['serviceAttribute'].reset();
        this.showSpinner = false;
        this.messageService.add({ severity: 'error', summary: 'Error when assigning attribute for service!' });
      });
    } else {
      this.form.controls['serviceAttribute'].markAsDirty();
      this.form.controls['serviceAttribute'].markAsTouched();
    }
  }

  // delete relationship between attribute and service
  public removeAttribute(attribute): void {
    if(attribute){
      this.confirmationService.confirm({
        icon: 'pi pi-exclamation-triangle',
        header: 'Confirmation',
        message: 'Are you sure that you want to delete ' + attribute['name'] + ' attribute ?',
        accept: () => {
          this.showSpinner = true;
          const serviceId = this.selectedService['id'];
          const attributeId = attribute["id"];
          this.controllerService.deleteAttributeForService(serviceId, attributeId).subscribe(result => {
            this.messageService.add({
              severity: 'success',
              summary: 'Successfull deleted',
              detail: 'Attribute is successfully deleted!'
            });
            const check = (attribute) => attribute['id'] == attributeId;
            const index = this.assignedAttributes.findIndex(check);
            this.assignedAttributes.splice(index, 1);
            this.showSpinner = false;
          }, error =>{
            this.showSpinner = false;
            this.messageService.add({ severity: 'error', summary: 'Error when deleting attribute for service!' });
          });
        }
      });
    }
  }
}

apm0013173-one-creator\src\app\admin\settings-gui\settings-gui.component.html
<!-- START Settings manager -->
<p-fieldset legend="Mcap credentials" [collapsed]="true" [toggleable]="true">
    <div class="ui-grid-row">
        <div class="ui-grid-col-2" >
            <strong>
                ID
            </strong>
        </div>
        <div class="ui-grid-col-6">
            <strong>
                CREDENTIAL
            </strong>
        </div>
    </div>
    <div class="fieldset_admin_list" *ngIf="credentials" >
        <div class="ui-grid-row" *ngFor="let credential of credentials">
            <div class="ui-grid-col-2" >
                {{credential.id}}
            </div>
            <div class="ui-grid-col-3">
                {{credential.credential}}
            </div>
            <div class="ui-grid-col-1">
                <button id="btn_remove" icon="fa fa-minus" style="margin-left: 2px; height: 21px" pButton type="button" iconPos="left" class="ui-button-info" (click)="deleteCredential(credential)">
                </button>
            </div>
        </div>
    </div>
    <br>
    <form *ngIf="form" [formGroup]="form">
        <div class="ui-grid-row">
            <div class="ui-grid-col-2" >
                Credential <span id="marker_required">*</span>:
            </div>
            <div class="ui-grid-col-6" >
                <input pInputText type="text" formControlName="credential" placeholder="Required" required="true"/>
                <p-message severity="warn" text="This field is required!" *ngIf="!form.controls['credential'].valid&&form.controls['credential'].dirty"></p-message>
            </div>
        </div>
    </form>
    <div class="ui-grid-row">
        <div class="ui-grid-col-4" >
            <button *ngIf="!save" type="button" pButton icon="fa fa-plus" (click)="saveCredential()" label="Create"></button>
            <button *ngIf="save" type="button" pButton icon="pi pi-spin pi-spinner" label="Saving ..." [disabled]="true"></button>
        </div>
    </div>
</p-fieldset>
<p-fieldset legend="Roles" [collapsed]="true" [toggleable]="true">
        <div class="ui-grid-row">
            <div class="ui-grid-col-2" >
                <strong>
                    ID
                </strong>
            </div>
            <div class="ui-grid-col-6">
                <strong>
                    ROLE
                </strong>
            </div>
        </div>
        <div class="fieldset_admin_list" *ngIf="roles" >
            <div class="ui-grid-row" *ngFor="let role of roles">
                <div class="ui-grid-col-2" >
                    {{role.ID}}
                </div>
                <div class="ui-grid-col-6">
                    {{role.IDENTIFICATOR}}
                </div>
            </div>
        </div>
    <br>
    <div class="ui-grid-row">
        <div class="ui-grid-col-12" >
            <button *ngIf="!syncRoles" type="button" pButton icon="pi pi-download" (click)="syncRolesWithUpm()" label="Sync roles"></button>
            <button *ngIf="syncRoles" type="button" pButton icon="pi pi-spin pi-spinner" label="Sync roles" [disabled]="true"></button>
        </div>
    </div>
</p-fieldset>
<p-fieldset legend="Users" [collapsed]="true" [toggleable]="true">
        <div class="ui-grid-row">
            <div class="ui-grid-col-2" >
                <strong>
                    ID
                </strong>
            </div>
            <div class="ui-grid-col-6">
                <strong>
                    NAME
                </strong>
            </div>
            <div class="ui-grid-col-2">
                <strong>
                    ATTUID
                </strong>
            </div>
        </div>
        <div class="fieldset_admin_list" *ngIf="users" >
            <div class="ui-grid-row" *ngFor="let user of users">
                <div class="ui-grid-col-2" >
                    {{user.ID}}
                </div>
                <div class="ui-grid-col-6">
                    {{user.NAME}}
                </div>
                <div class="ui-grid-col-2">
                    {{user.ATTUID}}
                </div>
            </div>
        </div>
    <br>
    <div class="ui-grid-row">
        <div class="ui-grid-col-12" >
            <button *ngIf="!syncUsers" type="button" pButton icon="pi pi-download" (click)="syncUsersWithUpm()" label="Sync users"></button>
            <button *ngIf="syncUsers" type="button" pButton icon="pi pi-spin pi-spinner" label="Sync users" [disabled]="true"></button>
        </div>
    </div>
</p-fieldset>
<p-fieldset legend="Action type attributes" [collapsed]="true" [toggleable]="true">
        <div class="ui-grid-row">
            <div class="ui-grid-col-2" >
                <strong>
                    ID
                </strong>
            </div>
            <div class="ui-grid-col-6">
                <strong>
                    Action type
                </strong>
            </div>
        </div>
        <div class="fieldset_admin_list" *ngIf="workflows" >
            <div class="ui-grid-row" *ngFor="let workflow of workflows">
                <div class="ui-grid-col-2" >
                    {{workflow.workflow.ID}}
                </div>
                <div class="ui-grid-col-3">
                    {{workflow.workflow.NAME}}
                </div>
                <div class="ui-grid-col-1">
                    <button id="btn_setting" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-cog" class="ui-button-info" (click)="editWorkflowAttributes(workflow)"></button>
                </div>
            </div>
        </div>
</p-fieldset>
<p-fieldset legend="Create BC user" [collapsed]="true" [toggleable]="true">
    <form *ngIf="formUsers" [formGroup]="formUsers">
        <div [ngClass]="{disabled: isDisabled}" >
            <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-2">
                        User Name <span id="marker_required">*</span>:
                    </div>
                    <div class="ui-grid-col-4">
                        <input pInputText style="width: 50%;" type="text" formControlName="userName" placeholder="This is required field" required="true"/>
                    </div>
                    <div class="ui-grid-col-4">
                        <p-message severity="warn" text="This field is required!" *ngIf="!formUsers.controls['userName'].valid && formUsers.controls['bcUserId'].touched"></p-message>
                    </div>
                </div>
                <div class="ui-grid-row">
                <div class="ui-grid-col-2">
                    Busines Center ID <span id="marker_required">*</span>:
                </div>
                <div class="ui-grid-col-4">
                    <input pInputText type="text" style="width: 50%;" formControlName="bcUserId" placeholder="This is required field" />
                </div>
                <div class="ui-grid-col-4">
                    <p-message severity="warn" text="This field is required!" *ngIf="!formUsers.controls['bcUserId'].valid && formUsers.controls['bcUserId'].touched"></p-message>
                </div>
            </div>
                <div class="ui-grid-row">
                    <div class="ui-grid-col-12">
                        <button *ngIf="!userSaving" pButton type="button" style="width: 15%;" iconPos="right" icon="fa fa-save" class="ui-button-info" (click)="createUser()" label="Create user" ></button>
                        <button *ngIf="userSaving" pButton type="button" style="width: 15%;" iconPos="right" icon="pi pi-spin pi-spinner" class="ui-button-info" (click)="createUser()" [disabled]="userSaving" label="Create user" ></button>
                    </div>
                </div>
            </div>
          </div >
    </form>

</p-fieldset>


<!-- END Settings manager -->

<!-- START Modal for workflow attributes -->
<p-dialog (onHide)="closeDialog()"
          header="Edit attributes for {{title}}"
          [closeOnEscape]="false"
          styleClass="settings_modal"
          [(visible)]="modalVisible"
          [modal]="true"
          [style]="{width: '50vw'}"
          [baseZIndex]="10000"
          [blockScroll]="true"
          [resizable]="false">
    <form  *ngIf="workflowAttributeForm" [formGroup]="workflowAttributeForm">
        <div class="ui-grid-row">
            <div class="ui-grid-col-6">
                <div *ngIf="assignedAttributes" class="sections">
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-6" >
                            <strong>
                                Attribute
                            </strong>
                        </div>
                        <div class="ui-grid-col-4">
                            <strong>
                                Status
                            </strong>
                        </div>
                    </div>
                    <div class="ui-grid-row" *ngFor="let attribute of assignedAttributes; let i = index">
                        <div class="ui-grid-col-6" >
                            {{attribute.name}}
                        </div>
                        <div class="ui-grid-col-4">
                            {{attribute.status}}
                        </div>
                        <div class="ui-grid-col-2">
                            <button id="btn_remove" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-minus" class="ui-button-info" (click)="deleteAttribute(attribute)"></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ui-grid-row">
            <div class="ui-grid-col-12">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-1">
                        <button id="btn_add" style="margin-left: 2px;" pButton type="button" iconPos="left" icon="fa fa-plus" class="ui-button-info" (click)="assigneAttribute()"></button>
                    </div>
                    <div class="ui-grid-col-7">
                        <p-dropdown  id="dropdown_att_left" placeholder="Select attribute" formControlName="attribute" [options]="workflowAttributes" optionLabel="name"></p-dropdown>
                        <p-dropdown  id="dropdown_att_right" placeholder="Select status" formControlName="status" [options]="statuses" optionLabel="label"></p-dropdown>
                    </div>
                    <div class="ui-grid-col-4">
                        <p-message id="att_message" severity="warn" text="This field is required!" *ngIf="(!workflowAttributeForm.controls['attribute'].valid&&workflowAttributeForm.controls['attribute'].dirty)
                        || !workflowAttributeForm.controls['status'].valid&&workflowAttributeForm.controls['status'].dirty"></p-message>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <p-footer>
        <button type="button" pButton icon="pi pi-times" (click)="closeDialog()" label="Close" class="ui-button-secondary"></button>
    </p-footer>
</p-dialog>
<!-- END Modal for workflow attributes -->

<div class="application_loading" *ngIf="showSpinner">
    <p-progressSpinner animationDuration=".8s"></p-progressSpinner>
</div>

apm0013173-one-creator\src\app\admin\settings-gui\settings-gui.component.css
.fieldset_admin_list {
    max-height: 210px;
    scroll-behavior: auto;
    overflow: scroll;
}

body .ui-fieldset .ui-fieldset-legend a {
    border: 0px solid transparent;
    background-color: transparent;
}

body .ui-fieldset.ui-fieldset-toggleable .ui-fieldset-legend a:hover {
    border: 0px solid transparent;
    background-color: transparent;
}

body .ui-buttonset.ui-button-info a{
    border: 0px solid transparent;
    background-color: transparent;
}

body .ui-button.ui-state-default.ui-button-info:enabled:hover, body .ui-buttonset.ui-button-info > .ui-button.ui-state-default:enabled:hover {
    box-shadow: 0 0 0 0 transparent;
}

body .ui-button.ui-state-default.ui-button-info a:hover{
    color: #0568ae;
}

body .ui-fieldset .ui-fieldset-legend a:focus {
    box-shadow: none;
}

body .ui-fieldset .ui-fieldset-legend a:hover {
    text-decoration: none;
}

body .ui-fieldset .ui-fieldset-legend a .ui-fieldset-toggler {
    font-size: 20px;
}

.settings_modal {
    min-width: 700px !important;
    height: 500px !important;
}

#dropdown_att_right {
    float: right;
    width: 50%;
}

#dropdown_att_left {
    float: left;
    width: 50%;
}

#att_message {
    text-align: right;
}

apm0013173-one-creator\src\app\admin\settings-gui\settings-gui.component.ts

import { Component, OnInit, ViewEncapsulation } from '@angular/core';
import { MessageService, ConfirmationService } from 'primeng/api';
import { FormGroup, FormBuilder, FormControl, Validators } from '@angular/forms';
import {ControllerService} from '../../services/controller.service';

@Component({
  selector: "app-settings-gui",
  templateUrl: "./settings-gui.component.html",
  styleUrls: ["./settings-gui.component.css"],
  encapsulation: ViewEncapsulation.None,
})
export class SettingsGuiComponent implements OnInit {
  roles: any[];
  users: any[];
  credentials: any[];
  workflows: any[];
  workflowAttributes: any[];
  assignedAttributes: any[];
  syncRoles: boolean = false;
  syncUsers: boolean = false;
  save: boolean = false;
  title: string = "";
  modalVisible: boolean = false;
  form: FormGroup;
  formUsers: FormGroup;
  workflowAttributeForm: FormGroup;
  selectedWorkflow: any = null;
  showSpinner: boolean = false;
  statuses: any[] = [];
  userSaving: boolean = false;

  constructor(
    private messageService: MessageService,
    private controllerService: ControllerService,
    private confirmationService: ConfirmationService,
    private fb: FormBuilder
  ) {
    this.form = this.fb.group({
      credential: new FormControl("", Validators.required),
    });
    this.formUsers = this.fb.group({
      userName: new FormControl(null, Validators.required),
      bcUserId: new FormControl(null, Validators.required),
    });
    this.workflowAttributeForm = this.fb.group({
      attribute: new FormControl("", Validators.required),
      status: new FormControl("", Validators.required),
    });
    this.statuses = [
      {
        label: "optional",
        value: "optional",
      },
      {
        label: "required",
        value: "required",
      },
      {
        label: "hide",
        value: "hide",
      },
    ];
  }

  ngOnInit(): void {
    this.loadRoles();
    this.loadUsers();
    this.loadAllCredentials();
    this.loadAllWorkflows();
    this.loadAllWorkflowAttributes();
  }

  // sync roles in DB with UPM
  public syncRolesWithUpm(): void {
    this.syncRoles = true;
    this.controllerService.syncRoles().subscribe(
      (result) => {
        this.syncRoles = false;
        this.messageService.add({
          severity: "success",
          summary: "Service Message",
          detail: "Roles successfully synchronized!",
        });
        this.loadRoles();
      },
      (error) => {
        this.syncRoles = false;
        this.messageService.add({
          severity: "error",
          summary: "Error",
          detail: "Error when synchronizing roles with UPM!",
        });
      }
    );
  }

  // sync users in DB with UPM
  public syncUsersWithUpm(): void {
    this.syncUsers = true;
    this.controllerService.syncUsers().subscribe(
      (result) => {
        this.syncUsers = false;
        this.messageService.add({
          severity: "success",
          summary: "Service Message",
          detail: "Users successfully synchronized!",
        });
        this.loadUsers();
      },
      (error) => {
        this.syncUsers = false;
        this.messageService.add({
          severity: "error",
          summary: "Error",
          detail: "Error when synchronizing users with UPM!",
        });
      }
    );
  }

  // load all avaliable roles from DB
  private loadRoles(): void {
    this.controllerService.getRoles().subscribe(
      (result) => {
        this.roles = result;
      },
      (error) => {
        this.messageService.add({
          severity: "error",
          summary: "Error",
          detail: "Error when loading roles!",
        });
      }
    );
  }

  // load all avaliable users from DB
  private loadUsers(): void {
    this.controllerService.getExistingUsersFromDB().subscribe(
      (result) => {
        this.users = result;
      },
      (error) => {
        this.messageService.add({
          severity: "error",
          summary: "Error",
          detail: "Error when loading users!",
        });
      }
    );
  }

  // load all avaliable mcap credentials from DB
  private loadAllCredentials(): Promise<any> {
    return new Promise((resolve, reject) => {
      this.controllerService.loadAllMcapCredentials().subscribe(
        (credentials) => {
          this.credentials = credentials;
          resolve(resolve);
        },
        (error) => {
          this.messageService.add({
            severity: "error",
            summary: "Error",
            detail: "Error when loading mcap credentials!",
          });
          reject(error);
        }
      );
    });
  }

  // create new mcap credential
  public saveCredential(): void {
    if (this.form.get("credential").valid) {
      this.save = true;
      this.controllerService
        .createMcapCredentials(this.form.get("credential").value)
        .subscribe(
          (result) => {
            this.loadAllCredentials();
            this.save = false;
            this.form.controls["credential"].reset();
            this.messageService.add({
              severity: "success",
              summary: "Service Message",
              detail: "Mcap credential successfully created!",
            });
          },
          (error) => {
            this.save = false;
            this.messageService.add({
              severity: "error",
              summary: "Error",
              detail: "Error when creating mcap credentials!",
            });
          }
        );
    } else {
      this.form.controls["credential"].markAsDirty();
      this.form.controls["credential"].markAsTouched();
    }
  }

  // delete mcap credential
  public deleteCredential(credential): void {
    this.confirmationService.confirm({
      icon: "pi pi-exclamation-triangle",
      header: "Confirmation",
      message:
        'Are you sure that you want to delete "' +
        credential["credential"] +
        '" credential ?',
      accept: () => {
        if (credential && credential["id"]) {
          this.controllerService
            .deleteMcapCredentials(credential["id"])
            .subscribe(
              async (result) => {
                await this.loadAllCredentials();
                this.messageService.add({
                  severity: "success",
                  summary: "Service Message",
                  detail: "Mcap credential successfully deleted!",
                });
              },
              (error) => {
                this.messageService.add({
                  severity: "error",
                  summary: "Error",
                  detail: "Error when deleting mcap credentials!",
                });
              }
            );
        }
      },
    });
  }

  // Load all avaliable workflows
  private loadAllWorkflows(): void {
    this.controllerService.loadAllActionTypes().subscribe(
      (result) => {
        this.workflows = [];
        for (const workflow of result["result"]) {
          if (
            !this.workflows.find(
              (wf) => wf["workflow"]["ID"] == workflow["workflow"]["ID"]
            )
          ) {
            this.workflows.push(workflow);
          }
        }
      },
      (error) => {
        this.messageService.add({
          severity: "error",
          summary: "Error",
          detail: "Error when loading action types!",
        });
      }
    );
  }

  // Load all avaliable workflows attributes
  private loadAllWorkflowAttributes(): void {
    this.controllerService.loadAllWorkflowAttributes().subscribe(
      (result) => {
        this.workflowAttributes = [];
        this.workflowAttributes = result;
      },
      (error) => {
        this.messageService.add({
          severity: "error",
          summary: "Error",
          detail: "Error when loading action type attributes!",
        });
      }
    );
  }

  // load all attrbutes which is assigned to workflow
  private loadAssignedAttributesForWorkflow(workflowId: string): Promise<any> {
    return new Promise((resolve, reject) => {
      this.controllerService
        .loadAssignedAttributesForWorkflow(workflowId)
        .subscribe(
          (result) => {
            this.assignedAttributes = result;
            resolve(resolve);
          },
          (error) => {
            this.showSpinner = false;
            this.messageService.add({
              severity: "error",
              summary: "Error",
              detail: "Error when loading assigned attributes for action type!",
            });
            reject(error);
          }
        );
    });
  }

  // open modal and edit workflow attributes
  public async editWorkflowAttributes(workflow: any) {
    this.showSpinner = true;
    this.selectedWorkflow = workflow;
    this.title = workflow["workflow"]["NAME"];
    await this.loadAssignedAttributesForWorkflow(workflow["workflow"]["ID"]);
    this.modalVisible = true;
    this.showSpinner = false;
  }

  public closeDialog(): void {
    this.modalVisible = false;
    this.selectedWorkflow = null;
    this.workflowAttributeForm.get("attribute").reset();
    this.workflowAttributeForm.get("status").reset();
  }

  // delete assigned attribute for selected workflow
  public deleteAttribute(attribute: any): void {
    this.showSpinner = true;
    this.controllerService
      .deleteAttributeForWorkflow(
        this.selectedWorkflow["workflow"]["ID"],
        attribute["id"]
      )
      .subscribe(
        (result) => {
          const check = (attr) => attr["id"] == attribute["id"];
          const attributeIndex = this.assignedAttributes.findIndex(check);
          this.assignedAttributes.splice(attributeIndex, 1);
          this.showSpinner = false;
          this.messageService.add({
            severity: "success",
            summary: "Successfull",
            detail: "Attribute successfully deleted!",
          });
        },
        (error) => {
          this.showSpinner = false;
          this.messageService.add({
            severity: "error",
            summary: "Service Message",
            detail: "Error when deleting assigned attribute!",
          });
        }
      );
  }

  // assigne attribute to workflow with selected status
  public assigneAttribute(): void {
    if (
      this.workflowAttributeForm.get("attribute").valid &&
      this.workflowAttributeForm.get("status").valid
    ) {
      const attId = this.workflowAttributeForm.get("attribute").value["id"];
      if (!this.assignedAttributes.find((wfatt) => wfatt["id"] == attId)) {
        this.showSpinner = true;
        this.controllerService
          .assigneAttributeForWorkflow(
            this.selectedWorkflow["workflow"]["ID"],
            attId,
            this.workflowAttributeForm.get("status").value["value"]
          )
          .subscribe(
            (reuslt) => {
              this.assignedAttributes.push({
                id: attId,
                name: this.workflowAttributeForm.get("attribute").value["name"],
                status: this.workflowAttributeForm.get("status").value["value"],
              });
              this.workflowAttributeForm.get("attribute").reset();
              this.workflowAttributeForm.get("status").reset();
              this.showSpinner = false;
              this.messageService.add({
                severity: "success",
                summary: "Successfull created",
                detail: "Attribute successfully assigned!",
              });
            },
            (error) => {
              this.workflowAttributeForm.get("attribute").reset();
              this.workflowAttributeForm.get("status").reset();
              this.showSpinner = false;
              this.messageService.add({
                severity: "error",
                summary: "Service Message",
                detail: "Error when attribute assigning to action type!",
              });
            }
          );
      } else {
        this.messageService.add({
          severity: "error",
          summary: "Service Message",
          detail: "You can't add attribute which is already assigned!",
        });
      }
    } else {
      this.workflowAttributeForm.controls["attribute"].markAsDirty();
      this.workflowAttributeForm.controls["attribute"].markAsTouched();
      this.workflowAttributeForm.controls["status"].markAsDirty();
      this.workflowAttributeForm.controls["status"].markAsTouched();
    }
  }

  public createUser(): void {
    const user = {
      userName: this.formUsers.get("userName").value,
      bcUserId: this.formUsers.get("bcUserId").value,
    };
    this.formUsers.markAllAsTouched();
    if(this.formUsers.valid){
      this.userSaving = true;
    this.controllerService.createBcUser(user).subscribe((result) => {
      this.userSaving = false;
      this.messageService.add({
        severity: "success",
        summary: "Saved",
        detail: "User was successfuly saved",
      });
    }, error =>{
      this.userSaving = false;
      this.messageService.add({
        severity: "error",
        summary: "Error",
        detail: error.error.message,
      });
    });
  }
}
}


i have shared few files inside "apm0013173-one-creator\src\app\admin" , let me know if some something else is also required for the migration of "Administration UI tab".

i am sharing the folder/files structure FYR below:
PS C:\Users\sa3590\Downloads\sakp\apm0013173-one-creator\src\app\admin> tree /f
Folder PATH listing for volume Windows
Volume serial number is 9088-221D
C:.
admin-gui-nav
       admin-gui-nav.component.html
       admin-gui-nav.component.scss
       admin-gui-nav.component.spec.ts
       admin-gui-nav.component.ts

customer-admin
       customer-admin.component.html
       customer-admin.component.scss
       customer-admin.component.spec.ts
       customer-admin.component.ts

device-mgmt
       device-mgmt.component.css
       device-mgmt.component.html
       device-mgmt.component.spec.ts
       device-mgmt.component.ts

permission-manager
       permission-manager.component.html
       permission-manager.component.scss
       permission-manager.component.spec.ts
       permission-manager.component.ts

service-administration
       service-administration.component.css
       service-administration.component.html
       service-administration.component.spec.ts
       service-administration.component.ts

settings-gui
        settings-gui.component.css
        settings-gui.component.html
        settings-gui.component.spec.ts
        settings-gui.component.ts











